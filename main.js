!function(t){function e(e){for(var i,r,a=e[0],s=e[1],l=e[2],d=0,f=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(u&&u(e);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var s=n[a];0!==c[s]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},c={0:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=c[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=c[t]=[e,i]}));e.push(n[2]=i);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(t){return r.p+""+({}[t]||t)+".js"}(t);var s=new Error;o=function(e){a.onerror=a.onload=null,clearTimeout(l);var n=c[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}c[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=s;o.push([142,1]),n()}({0:function(t,e,n){"use strict";n.d(e,"r",(function(){return g})),n.d(e,"i",(function(){return d})),n.d(e,"m",(function(){return m})),n.d(e,"k",(function(){return p})),n.d(e,"s",(function(){return y})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return f})),n.d(e,"w",(function(){return b})),n.d(e,"j",(function(){return v})),n.d(e,"l",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"o",(function(){return h})),n.d(e,"d",(function(){return k})),n.d(e,"v",(function(){return w})),n.d(e,"b",(function(){return E})),n.d(e,"e",(function(){return A})),n.d(e,"u",(function(){return T})),n.d(e,"p",(function(){return L})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return x})),n.d(e,"q",(function(){return $})),n.d(e,"n",(function(){return B})),n.d(e,"t",(function(){return M}));n(18);var i=n(1);const c={},o={};let r="",a=null,s=-1,l=[];function u(){return Object.keys(c).map(d)}function d(t){return c[t]}function f(t){return o[t.id]={shuffled:!1,sortOrder:[]},c[t.id]={sortedBy:"index",order:1,tracks:[],...t},c[t.id]}function b(t,e){Object.assign(c[t],e)}function m(t){delete c[t],delete o[t]}function p(t){return o[t]}function y(t,e){Object.assign(o[t],e)}function v(t){return t.reduce((t,e)=>t+=e.durationInSeconds,0)}function g(t=""){r=t}function j(){return r}function O(t){return t===r}function h(t){a=t}function k(){return a}function w(t){const e=k();if(e&&O(t)){const n=E(t,e.name),i=n?n.index:-1;e.index=i,L(i,t)}}function E(t,e){const n=c[t];return n?n.tracks.find(t=>t.name===e):null}function L(t,e){const{sortOrder:n}=o[e],i=n.indexOf(t);s=l.indexOf(i),s=s<0?0:s}function I(){return s}function x(){return l}function T(t){for(let e=0;e<l.length;e++)if(l[e]===t){[l[0],l[e]]=[t,l[0]];break}}function $(t,e,n=-1){const r=k(),{tracks:a}=c[t],s=a.map(({index:t})=>t);o[t].shuffled=e,l=e?Object(i.j)(s):s,e&&n>=0&&T(n),r&&L(r.index,t)}function A(t,e){const n=function(t){let e=s;return e+=t,!t||e>=l.length?e=0:-1===e&&(e=l.length-1),l[e]}(e),{tracks:i}=c[t],{sortOrder:r}=o[t];return i[r[n]]}function B(t){t.tracks=t.tracks.map((t,e)=>(t.index=e,t))}function S(t,e){return"index"===t?e.index:"duration"===t?e.durationInSeconds:e[t].toLowerCase()}function M(t){var e,n,i;o[t.id].sortOrder=(e=t.tracks,n=t.sortedBy,i=t.order,[...e].sort((t,e)=>{const c=S(n,t),o=S(n,e);return c<o?-i:c>o?i:0}).map(({index:t})=>t))}},1:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"d",(function(){return b}));n(18);const i=function(){const t=[];return{load:function(e){return t.includes(e.src)?Promise.resolve():new Promise(n=>{const i=document.createElement("script");Object.keys(e).forEach(t=>{i.setAttribute(t,e[t])}),document.getElementsByTagName("body")[0].appendChild(i),t.push(e.src),i.onload=n})}}}();function c(t,e){const n=document.querySelector(t);n&&n.classList.remove(e)}function o(t,e,n=null){for(;e&&e!==n;){if(e.hasAttribute(t))return{elementRef:e,attrValue:e.getAttribute(t)};e=e.parentElement}}function r(t){if(t)return t.scrollHeight>t.clientHeight?t:r(t.parentElement)}function a(t,e){return!!e&&!e.contains(t)}function s(t,e=!0){return e&&t<10?"0"+t:t}function l(t,e=!1){const n=function(t){return Math.floor(t/3600)}(t),i=function(t){return Math.floor(t/60%60)}(t),c=function(t){return t%60}(t);return`${(e=e||n)?n+":":""}${s(i,e)}:${s(c)}`}function u(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}function d(t,{id:e,title:n}){"svg"===t.nodeName?t.querySelector("title").textContent=n:t.setAttribute("title",n),t.querySelector("use").setAttribute("href","#"+e)}function f(t){let e=t.length;for(;e;){const n=Math.floor(Math.random()*e);e-=1,[t[e],t[n]]=[t[n],t[e]]}return t}function b(t){return`\n  <svg viewBox="0 0 24 24" ${t.elementId?"id="+t.elementId:""} ${t.className?`class="${t.className}"`:""}>\n  ${t.title?`<title>${t.title}</title>`:""}\n  <use href="#${t.iconId}"></use>\n  </svg>\n  `}},10:function(t,e,n){"use strict";n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"f",(function(){return y})),n.d(e,"c",(function(){return v}));var i=n(0),c=n(14),o=n(2),r=n(13),a=n(6),s=n(9),l=n(15),u=n(3),d=n(8);function f(t){Object(i.s)(t.id,{initialized:!0}),Object(l.a)(t.title,t.id),Object(c.a)(t),Object(i.n)(t),Object(i.t)(t),Object(r.a)("playlist/"+t.id)}function b({id:t,storePlaylist:e}){Object(i.l)(t)&&Object(u.h)(Object(i.d)()),Object(o.f)(t),Object(i.m)(t),Object(l.e)(t),Object(r.c)(t),e&&Object(s.a)({action:"delete-playlist",playlist:{id:t}})}function m(t,e,{type:n}={}){const{initialized:l,rendered:u}=Object(i.k)(t.id);e.length&&(t.tracks=t.tracks.concat(e)),l?(Object(i.n)(t),Object(i.l)(t.id)&&Object(i.q)(t.id,Object(a.a)("shuffle")),Object(i.t)(t),Object(i.v)(t.id),Object(c.d)(t.id,t.tracks),u&&Object(o.n)(t),t.storePlaylist&&Object(s.a)({action:"sync"===n?"update-tracks":"add-tracks",artworks:Object(d.b)(),playlist:{id:t.id,tracks:e}})):(f(t),Object(r.b)("local-files")&&!u&&Object(r.d)(),t.storePlaylist&&Object(s.a)({action:"create-playlist",artworks:Object(d.b)(),playlist:t}))}function p({id:t,tracks:e}){const{rendered:n}=Object(i.k)(t),c=Object(o.c)(t);n&&c&&(c.innerHTML=""),e.length=0}function y(t){const e=Object(i.a)({title:t.target.title.value,id:Math.random().toString(36).slice(2),storePlaylist:!0,type:"grid"});f(e),Object(s.a)({action:"create-playlist",playlist:e}),t.preventDefault(),t.target.reset()}function v(t,e,n,i){e.insertAdjacentHTML(n,`\n  <form id="js-${t}-form" class="${t}-form">\n  <input type="text" name="title" class="input" autocomplete="off" placeholder="Title" required>\n  <button class="btn">Create</button>\n  </form>\n  `);const c=document.getElementById(`js-${t}-form`);c.elements.title.focus(),c.addEventListener("submit",i)}},13:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return r}));n(87);var i=n(1);let c=[];function o(t){return c.some(e=>e===t)}function r(t){return window.location.hash.includes(t)}function a(t){o(t)||c.push(t)}function s(t){c=c.filter(e=>!e.includes(t))}function l(t){window.location.hash="/"+t}function u(){const t=window.location.hash.slice(2).replace(/\/+$/g,"");let e=!1,n="home";t&&!o(t)?n="not-found":(e=t.startsWith("playlist/"),n=e?t.split("playlist/")[1]:n),Object(i.a)("route-change",{tabId:n,isPlaylistTab:e})}window.addEventListener("hashchange",u)},14:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return O})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return E}));n(18);var i=n(1),c=n(15),o=n(9),r=n(7),a=n(27),s=n(8),l=n(28),u=n(0),d=n(10);let f=null;function b(){const t="js-pl-entries";return document.getElementById(t)||function(t){document.getElementById("js-tab-home").insertAdjacentHTML("beforeend",`\n    <div class="home-tab-section pl-entry-container">\n      <div class="home-tab-section-header">\n        <h2 class="home-tab-section-title">Playlists</h2>\n      </div>\n      <ul id="${t}"></ul>\n    </div>\n  `);const e=document.getElementById(t);return e.addEventListener("click",A),e.addEventListener("focus",B,!0),e}(t)}function m(t){const e=document.querySelector(`[data-entry-id="${t}"]`);return e?e.querySelector("[data-action='sync']"):null}function p({action:t,title:e,iconId:n,disabled:c}){return`\n    <button class="btn btn-icon btn-icon-alt pl-entry-btn" data-action="${t}"\n    title="${e}"${c?" disabled":""}>\n      ${Object(i.d)({iconId:n})}\n    </button>\n  `}function y(t){let e=Math.floor(t/3600),n=Math.ceil(t/60%60);return 60===n&&(n=0,e+=1),`${e} hr ${n} min`}function v(t){const e=function(t){const e="assets/images/album-art-placeholder.png";if(!t.length)return[e];const n=t.reduce((t,e)=>(e.artworkId&&t.push(e),t),[]);if(!n.length)return[e];const c=[];for(const t of Object(i.j)(n)){if(4===c.length)break;c.includes(t.artworkId)||c.push(t.artworkId)}return c.map(t=>Object(s.a)(t).image.small.url)}(t);return`\n    <div class="pl-entry-thumbnail _${e.length}">\n      ${e.map(t=>`\n        <div class="pl-entry-thumb-image-container">\n          <img src="${t}" class="pl-entry-thumb-image" alt="">\n        </div>\n      `).join("")}\n    </div>\n  `}function g(t,e){const n=Object(u.j)(e);t.querySelector(".track-count").textContent=e.length+" tracks",t.querySelector(".playlist-duration").textContent=y(n)}function j(t,e){t.querySelector(".pl-entry-thumbnail").remove(),t.insertAdjacentHTML("afterbegin",v(e))}function O(t,e,n=!0){const{children:i}=document.getElementById("js-pl-entries");for(const c of i)if(t===c.getAttribute("data-entry-id")){g(c,e),n&&j(c,e);break}}function h(t){const e=b(),n=Object(u.j)(t.tracks),c=Object(i.d)({iconId:"link"}),o=t.url?`<a href="${t.url}"\n    class="btn btn-icon btn-icon-alt pl-entry-btn" target="_blank"\n    title="Open playlist on YouTube">\n      ${c}\n    </a>\n  `:"",r=t.url?p({disabled:!navigator.onLine,action:"sync",title:"Synchronize playlist",iconId:"sync"}):"",a=t.url?`\n    <div class="pl-entry-panel-container">\n      ${p({action:"settings",title:"Settings",iconId:"settings"})}\n    </div>\n  `:"",s=p({action:"remove",title:"Remove playlist",iconId:"trash"}),l=Object(i.d)({iconId:"edit",className:"pl-entry-input-icon"}),d=t.storePlaylist?"":Object(i.d)({iconId:"alert",className:"pl-entry-stats-item",title:"This playlist will not be stored"}),f=t.isPrivate?Object(i.d)({iconId:"lock",className:"pl-entry-stats-item",title:t.user?"Private to "+t.user.name:"Private"}):"";e.insertAdjacentHTML("beforeend",`\n    <li class="pl-entry" data-entry-id=${t.id}>\n      ${v(t.tracks)}\n      <div class="pl-entry-content">\n        <div class="pl-entry-input-container" data-action="edit">\n          <input type="text" class="input pl-entry-input" value="${t.title}">\n          ${l}\n        </div>\n        <div class="pl-entry-footer">\n          <div class="pl-entry-stats">\n          ${d}\n          ${f}\n          <span class="pl-entry-stats-item track-count">${t.tracks.length} tracks</span>\n          <span class="pl-entry-stats-item playlist-duration">${y(n)}</span>\n        </div>\n        ${o}\n        ${r}\n        ${a}\n        ${s}\n        </div>\n      </div>\n    </li>\n  `)}function k(t,{element:e,pl:n}){e.insertAdjacentHTML("afterend",`\n    <div id="${t}" class="panel pl-entry-panel">\n      <h3 class="panel-title">Playlist settings</h3>\n      <label class="checkbox-container">\n        <input type="checkbox" class="sr-only checkbox-input" ${n.syncOnInit?"checked":""}>\n        <div class="checkbox">\n          <div class="checkbox-tick"></div>\n        </div>\n        <span class="checkbox-label">Synchronize playlist on startup</span>\n      </label>\n    </div>\n  `),document.getElementById(t).addEventListener("change",S)}function w(t){const{parentElement:e}=t;var n;1===e.children.length?((n=e).removeEventListener("click",A),n.removeEventListener("focus",B,!0),n.parentElement.remove()):t.remove()}async function E(t){t.length&&(t.forEach(({id:t})=>{Object(i.a)("import",{importing:!0,option:"youtube",playlistId:t})}),await Object(a.d)(),t.forEach(({url:t})=>{Object(l.a)(t,"sync")}))}function L({currentTarget:t}){const{attrValue:e}=Object(i.c)("data-entry-id",t),n=Object(u.i)(e),r=t.value;t.removeEventListener("blur",L),t.removeEventListener("keyup",I),r?r!==n.title&&(n.title=r,Object(c.b)(e,r),n.storePlaylist&&Object(o.a)({action:"change-title",playlist:{id:n.id,title:r}})):t.value=n.title}function I({currentTarget:t,which:e}){13===e&&t.blur()}function x(t){document.getElementById("js-player").insertAdjacentHTML("beforeend",`\n    <div id="${t}" class="modal">\n      <div class="panel">\n        <div class="panel-title-container">\n          ${Object(i.d)({iconId:"trash",className:"panel-icon"})}\n          <h3 class="panel-title">Remove playlist?</h3>\n        </div>\n        <p>Are you sure you want to remove this playlist?<br>If you remove this playlist all your tracks will be lost.</p>\n        <div class="panel-button-container">\n          <button class="btn btn-danger" data-type="remove">Remove</button>\n          <button class="btn btn-text" data-type="cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  `),document.getElementById(t).addEventListener("click",$)}function T(t){document.getElementById("js-player").insertAdjacentHTML("beforeend",`\n    <div id="${t}" class="modal">\n      <div class="panel">\n        <div class="panel-title-container">\n          ${Object(i.d)({iconId:"sync",className:"panel-icon"})}\n          <h3 class="panel-title">Syncronize playlist?</h3>\n        </div>\n        <p>Are you sure you want to synchronize this playlist with the playlist on YouTube? If you choose to synchronize you will lose all previously imported tracks.</p>\n        <div class="panel-button-container">\n          <button class="btn btn-danger" data-type="sync">Synchronize</button>\n          <button class="btn btn-text" data-type="cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  `),document.getElementById(t).addEventListener("click",$)}function $({target:t,currentTarget:e}){if(t===e)return Object(r.a)(),void(f=null);const n=Object(i.c)("data-type",t);n&&("remove"===n.attrValue?(Object(d.d)(f.playlist),w(f.entryElement)):"sync"===n.attrValue&&E([f.playlist]),Object(r.a)(),f=null)}function A({target:t}){const e=Object(i.c)("data-entry-id",t),n=Object(i.c)("data-action",t);if(!e||!n||n.elementRef.disabled)return;const{attrValue:c,elementRef:o}=n,a=Object(u.i)(e.attrValue);"remove"===c?a.tracks.length?(f={playlist:a,entryElement:e.elementRef},Object(r.b)("js-pl-remove-panel",x)):(Object(d.d)(a),w(e.elementRef)):"sync"===c?(f={playlist:a},Object(r.b)("js-pl-sync-panel",T)):"settings"===c?Object(r.b)("js-pl-entry-panel",k,{element:o,pl:a}):"edit"===c&&o.querySelector(".input").focus()}function B({target:t}){const e=Object(i.c)("data-action",t);e&&"edit"===e.attrValue&&(t.addEventListener("blur",L),t.addEventListener("keyup",I))}function S({target:t}){const{attrValue:e}=Object(i.c)("data-entry-id",t),n=Object(u.i)(e);n.syncOnInit=t.checked,n.storePlaylist&&Object(o.a)({action:"change-sync",playlist:{id:n.id,syncOnInit:n.syncOnInit}})}window.addEventListener("connectivity-status",({detail:t})=>{const e=document.getElementById("js-pl-entries");if(e){e.querySelectorAll("[data-action=sync]").forEach(e=>{e.disabled=!t})}})},142:function(t,e,n){"use strict";n.r(e);n(94),n(95),n(96),n(97);var i=n(1);n(6),n(9),n(13),n(4),n(7),n(15),n(33),n(28),n(0),n(70),n(14),n(10),n(2),n(43),n(44),n(26),n(37),n(38),n(3),n(5),n(45),n(34),n(35),n(16);"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e.onstatechange=()=>{"installed"===e.state&&navigator.serviceWorker.controller&&Object(i.a)("sw-state-change","update")}}}).catch(console.log)},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"f",(function(){return d})),n.d(e,"d",(function(){return f}));var i=n(1),c=n(7),o=n(10);const r=document.getElementById("js-sidebar-container");function a(t){return document.getElementById("js-sidebar-entry-"+t)}function s(t,e){document.getElementById("js-sidebar-entries").insertAdjacentHTML("beforeend",`\n    <li id="js-sidebar-entry-${e}" class="sidebar-entry">\n      <a href="./#/playlist/${e}" class="sidebar-link" data-link>${t}</a>\n    </li>\n  `)}function l(t,e){a(t).querySelector(".sidebar-link").textContent=e}function u(t){a(t).remove()}function d(t){const e=a(t);f(),e.insertAdjacentHTML("beforeend",Object(i.d)({iconId:"volume",elementId:"js-active-playlist-icon",className:"active-playlist-icon"}))}function f(){const t=document.getElementById("js-active-playlist-icon");t&&t.remove()}function b(t,{element:e}){e.insertAdjacentHTML("afterend",`\n    <form id="${t}" class="panel sidebar-form">\n      <h3 class="panel-title">Create Playlist</h3>\n      <div class="sidebar-form-input-container">\n        <input type="text" name="title" class="input sidebar-form-input"\n          autocomplete="off" placeholder="Title" required>\n        <button class="btn">Create</button>\n      </div>\n    </form>\n  `);const n=document.getElementById(t);n.elements.title.focus(),n.addEventListener("submit",m)}function m(t){Object(o.f)(t),Object(c.a)()}r.addEventListener("click",({currentTarget:t,target:e})=>{if(Object(i.c)("data-link",e,t)||Object(i.f)(e,t.firstElementChild))return void t.classList.add("hidden");const n=Object(i.c)("data-btn",e,t);n&&Object(c.b)("js-sidebar-form-panel",b,{element:n.elementRef})}),r.addEventListener("keyup",({currentTarget:t,target:e,key:n})=>{const c=Object(i.c)("data-link",e,t);c&&" "===n&&c.elementRef.click()}),window.addEventListener("connectivity-status",({detail:t})=>{document.getElementById("js-online-status").classList.toggle("visible",!t)})},16:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(18);var i=n(1);function c(){return document.getElementById("js-player-messages")||function(){const t=document.createElement("div");return t.id="js-player-messages",t.classList.add("player-messages"),document.getElementById("js-player").appendChild(t),t}()}function o(){const t=c();if(t){const e=[...t.children].reverse();for(const n of e)if(!n.id){n.remove(),e.length-1==0&&t.remove();break}}}function r({title:t,body:e,id:n}){c().insertAdjacentHTML("afterBegin",`\n    <div ${n?`id=${n} `:""}class="player-message">\n      ${t?`<h3 class="player-message-title">${t}</h3>`:""}\n      <div class="player-message-body">${e}</div>\n    </div>\n  `),n||setTimeout(o,6e3)}function a(){location.reload()}function s(){Object(i.a)("connectivity-status",navigator.onLine)}window.addEventListener("sw-state-change",({detail:t})=>{"update"===t&&(c().insertAdjacentHTML("afterBegin",'\n    <div class="player-message service-worker-message">\n      <p class="player-message-body">Update is available, please refresh.</p>\n      <button id="js-player-message-btn" class="btn btn-icon player-message-btn">Refresh</button>\n    </div>\n  '),document.getElementById("js-player-message-btn").addEventListener("click",a),setTimeout(o,6e3))}),window.addEventListener("online",s),window.addEventListener("offline",s),window.addEventListener("load",s)},2:function(t,e,n){"use strict";n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return y})),n.d(e,"f",(function(){return E})),n.d(e,"n",(function(){return w})),n.d(e,"g",(function(){return k})),n.d(e,"h",(function(){return x})),n.d(e,"k",(function(){return I})),n.d(e,"i",(function(){return T})),n.d(e,"j",(function(){return $})),n.d(e,"d",(function(){return L})),n.d(e,"m",(function(){return A})),n.d(e,"l",(function(){return B})),n.d(e,"a",(function(){return S}));var i=n(1),c=n(4),o=n(9),r=n(5),a=n(3),s=n(8),l=n(0),u=n(38),d=n(26);let f=null;function b(t){return document.getElementById("js-"+t)}function m(){if(f)return f.querySelector(".btn-icon")}function p(t){if(Object(c.c)()!==Object(l.c)())return Object(r.b)(!0);const e=Object(l.d)(),n=Object(a.a)();return e&&e.index===t?Object(r.b)(n):Object(r.b)(!0)}function y(t,e,n){return"list"===n?function(t,e){const{sortOrder:n}=Object(l.k)(e),c=n.indexOf(t.index),{title:o,id:r}=p(t.index);return`\n    <span class="list-item-first-col">\n    <span class="list-item-index">${c+1}</span>\n    <button class="btn btn-icon track-play-pause-btn" data-btn="play" title="${o}">\n      ${Object(i.d)({iconId:r,className:"list-item-btn-icon"})}\n    </button>\n    </span>\n    <span class="list-item-col">${t.title}</span>\n    <span class="list-item-col">${t.artist}</span>\n    <span class="list-item-col">${t.album}</span>\n    <span class="list-item-last-col">${t.duration}</span>\n  `}(t,e):function(t){const{title:e,id:n}=p(t.index);return`\n  <div class="artwork-container grid-item-thumbnail">\n    <button class="btn btn-icon track-play-pause-btn artwork-container-btn" data-btn="play" title="${e}">\n      ${Object(i.d)({iconId:n,className:"grid-item-btn-icon"})}\n    </button>\n    <img src="${Object(s.a)(t.artworkId).image.small.url}" class="artwork" alt="">\n  </div>\n  ${function(t){let e=null;e=t.artist&&t.title?`\n      <div class="track-info-item track-title">${t.title}</div>\n      <div class="track-info-item">${t.artist} ${t.album?"- "+t.album:""}</div>\n    `:`<div class="track-info-item track-name">${t.name}</div>`;return`<div class="track-info">${e}</div> `}(t)}\n  <div class="grid-item-duration">${t.duration}</div>\n  `}(t)}function v({index:t,player:e}){return`<li class="list-item track${"youtube"!==e||navigator.onLine?"":" disabled"}" data-index="${t}"></li>`}function g({index:t,player:e}){return`<li class="grid-item track${"youtube"!==e||navigator.onLine?"":" disabled"}" data-index="${t}"></li>`}function j(t,e,n){return e.reduce((e,i)=>e+n(t[i]),"")}function O(t){return t.tracks.length?function({id:t,type:e,tracks:n}){const{sortOrder:i}=Object(l.k)(t);return"list"===e?function(t,e){return`\n  <ul class="list-view-header">\n    <li class="list-item-first-col">#</li>\n    <li>Title</li>\n    <li>Artist</li>\n    <li>Album</li>\n    <li class="list-item-last-col">Duration</li>\n  </ul>\n  <ul id="js-${t}" class="playlist-view">${e}</ul>\n  `}(t,j(n,i,v)):function(t,e){return`<ul id="js-${t}" class="playlist-view grid-view">${e}</ul>`}(t,j(n,i,g))}(t):'<p class="playlist-message">This playlist is empty</p>'}function h(t){if(Object(l.c)()!==t)return;const e=Object(l.d)();e&&-1!==e.index&&I(e.index,t)}function k(t){const e=function(t){const e=O(t);return`<div id="js-tab-${t.id}" class="tab" tabindex="0">${e}</div>`}(t);document.getElementById("js-tabs").insertAdjacentHTML("beforeend",e),Object(l.s)(t.id,{rendered:!0}),t.tracks.length&&(h(t.id),Object(u.a)(t.id))}function w(t){Object(c.a)(t.id).innerHTML=O(t),t.tracks.length?(h(t.id),Object(u.b)(t.id),Object(d.b)(t)):Object(u.c)(t.id)}function E(t){const e=Object(c.a)(t);e&&(Object(u.c)(t),e.remove())}function L(t,e){const{sortOrder:n}=Object(l.k)(e),i=n.indexOf(t);return document.getElementById("js-"+e).children[i]}function I(t,e){f=L(t,e),f.classList.add("playing")}function x(){f&&(f.classList.remove("playing"),f=null)}function T(t){Object(l.c)()===t&&f&&$(t)}function $(t){requestAnimationFrame(()=>{const e=Object(c.a)(t),{offsetHeight:n,offsetTop:i}=f,{clientHeight:o,scrollTop:r}=e;(i-n<r||i>r+o)&&(e.scrollTop=i-o/2)})}function A(t){const e=m();e&&Object(r.i)(e,t)}function B(t){const e=document.getElementById("js-list-toggle-btn"),n=document.getElementById("js-grid-toggle-btn");"list"===t?(e.classList.add("active"),n.classList.remove("active")):(n.classList.add("active"),e.classList.remove("active"))}function S(t,e){t.type=e,w(t),B(e),t.storePlaylist&&Object(o.a)({action:"change-type",playlist:{id:t.id,type:e}})}window.addEventListener("connectivity-status",({detail:t})=>{Object(l.h)().forEach(e=>{const n=b(e.id),{sortOrder:i}=Object(l.k)(e.id);n&&e.tracks.forEach(e=>{if("youtube"===e.player){const c=i.indexOf(e.index);n.children[c].classList.toggle("disabled",!t)}})})})},26:function(t,e,n){"use strict";n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return D})),n.d(e,"a",(function(){return I}));n(18);var i=n(1),c=n(0),o=n(6),r=n(4),a=n(9),s=n(37),l=n(2),u=n(14);const d={},f={};let b=null,m=null,p=0,y=null,v={},g=[],j=0,O=!1,h=!1,k=-1;function w({id:t,tracks:e,type:n}){b&&E(),e.length&&(k=-1,p="list"===n?35:0,b=Object(r.a)(t),b.addEventListener("mousedown",C))}function E(){b.removeEventListener("mousedown",C),b=null}function L(){V().forEach(t=>{t.classList.remove("selected")})}function I(){L(),T()}function x(){h||(h=!0,Object(s.a)(),setTimeout(()=>{window.addEventListener("click",R,!0)},0),window.addEventListener("keydown",q))}function T(){h&&(h=!1,Object(s.c)(),window.removeEventListener("click",R,!0),window.removeEventListener("keydown",q))}function $(t,{min:e,max:n}){return t>n?n:t<e?e:t}function A(){clearInterval(j),j=0}function B(t){O=!0,requestAnimationFrame(()=>{y&&function(t,e,n,i){let c=t.x-e.x,o=t.y-e.y;if(c<0){const t=e.x+c;c*=-1,n.left=t,i.left=t+"px"}else n.left!==e.x&&(n.left=e.x,i.left=e.x+"px");if(o<0){let t=e.y+o;t<p&&(t=p),o*=-1,n.top=t,i.top=t+"px"}else n.top!==e.y&&(n.top=e.y,i.top=e.y+"px");n.right=n.left+c,n.bottom=n.top+o,i.width=c+"px",i.height=o+"px"}(f,d,v,y.style),function(t,e,n){for(let i=0;i<t.length;i++){const c=t[i],o=c.ref.classList;e.right>c.left&&e.left<c.right&&e.bottom>c.top&&e.top<c.bottom?(n&&!c.selected&&o.contains("selected")&&(o.remove("selected"),c.removed=!0),c.removed||(o.add("selected"),c.selected=!0)):c.selected?(o.remove("selected"),c.selected=!1):c.removed&&(o.add("selected"),c.removed=!1)}}(g,v,t),O=!1})}function S(t){const{scrollHeight:e,height:n}=m;b.scrollTop+=36,f.y=b.scrollTop+n,f.y>=e&&(f.y=e,A()),O||B(t)}function M(t){b.scrollTop-=36,f.y=b.scrollTop,f.y<=0&&(f.y=0,A()),O||B(t)}function P(t){const{top:e,left:n,width:i,height:c,scrollHeight:o}=m,a=t.clientY-e;if(f.x=$(t.clientX-n,{min:0,max:i}),f.y=$(b.scrollTop+a,{min:p,max:o}),t.preventDefault(),!y&&function(t,e){return t.x>e.x+2||t.x<e.x-2||t.y>e.y+2||t.y<e.y-2}(f,d))return g=function(){const{children:t}=Object(l.c)(Object(r.c)());return Array.from(t).map(t=>{const e=t.offsetTop,n=t.offsetLeft;return{ref:t,top:e,left:n,right:n+t.offsetWidth,bottom:e+t.offsetHeight}})}(),y=function(t,{x:e,y:n}){return v.top=n,v.left=e,t.insertAdjacentHTML("afterbegin",`\n  <div class="selection-area" style="top: ${n}px; left: ${e}px"></div>\n  `),t.firstElementChild}(b,d),document.activeElement.blur(),t.ctrlKey||L(),void T();if(O||B(t.ctrlKey),j&&a>p&&a<c)A();else if(!j){let e=null;if(a>c&&f.y<o)e=S;else{if(!(a<p&&f.y>p))return;e=M}j=setInterval(e,40,t.ctrlKey)}}function H({target:t,ctrlKey:e,shiftKey:n}){if(j&&A(),y){const t=V();k=-1,y.remove(),y=null,v={},g.length=0,t.length?x():T()}else{const c=Object(i.c)("data-index",t,b);if(c){const t=parseInt(c.attrValue,10);n&&-1!==k?k>=0&&k!==t&&function(t,e,n){const{children:i}=Object(l.c)(Object(r.c)());t>e&&([t,e]=[e,t]);const c=[...i].slice(t,e+1);n||L();for(const t of c)t.classList.add("selected")}(k,t,e):(k=t,function(t,e){if(e||L(),t.classList.toggle("selected"),t.classList.contains("selected"))x();else{const e=V();t.blur(),e.length||T()}}(c.elementRef,e))}else e||(k=-1,I())}window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",H)}function R({target:t}){!Object(i.c)("data-move-to",t)&&Object(i.f)(t,b)&&I()}function C({currentTarget:t,target:e,which:n,clientX:c,clientY:o}){var r;1===n&&(Object(i.c)("data-btn",e)?I():(m={top:(r=t).offsetTop,left:r.offsetLeft,width:r.clientWidth,height:r.offsetHeight,scrollHeight:r.scrollHeight},d.x=c-m.left,d.y=t.scrollTop+o-m.top,d.x<m.width&&d.y>p&&(window.addEventListener("mousemove",P),window.addEventListener("mouseup",H))))}function q({key:t,keyCode:e}){"Delete"!==t&&127!==e||(!function(){const t=V(),e=Object(r.b)(),n=U(t),{tracksToKeep:i,tracksToRemove:s}=function(t,e){const n=[],i=[];return t.forEach(t=>{e.includes(t.index)?i.push(t):n.push(t)}),{tracksToRemove:i,tracksToKeep:n}}(e.tracks,n);e.tracks=i,k=-1,t.forEach(t=>t.remove()),Object(c.n)(e),Object(c.t)(e),function(t){const{sortOrder:e}=Object(c.k)(t);[...Object(l.c)(t).children].forEach((t,n)=>{const i=t.querySelector(".list-item-index");i&&(i.textContent=n+1),t.setAttribute("data-index",e[n])})}(e.id),Object(c.q)(e.id,Object(o.a)("shuffle")),Object(c.v)(e.id),Object(u.d)(e.id,i),i.length||(E(),Object(l.n)(e));e.storePlaylist&&Object(a.a)({action:"remove-tracks",playlist:{id:e.id,tracks:s}})}(),T())}function V(){return Array.from(b.querySelectorAll(".track.selected"))}function U(t){return t.map(t=>parseInt(t.getAttribute("data-index"),10))}function D(){return U(V())}window.addEventListener("keydown",t=>{const e=t.shiftKey||t.altKey||t.metaKey,n=Object(r.c)();if(t.target instanceof HTMLInputElement||e||!n)return;const i=Object(l.c)(n);if(i&&i.children.length&&t.ctrlKey&&"a"===t.key){t.preventDefault(),x();for(const t of i.children)t.classList.add("selected")}})},27:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m}));var i=n(1),c=n(7);const o=document.getElementById("js-google-sign-in");let r=null,a=!1,s=!1,l=!1;async function u(){try{if(!s)return void await d(!0);const t=gapi.auth2.getAuthInstance();t.isSignedIn.get()?(await t.signOut(),a=!1,r=null,document.getElementById("js-google-panel-toggle-btn").remove(),o.insertAdjacentHTML("beforeend",'\n    <button id="js-google-sign-in-btn" class="btn btn-text"\n      data-item="google-sign-in" data-disable>Sign In</button>\n  '),Object(c.a)(),Object(i.a)("google-sign-out")):(await t.signIn(),f(t.currentUser.get()))}catch(t){console.log(t)}}async function d(t=!1){if(s||l)return a;l=!0;try{await i.h.load({src:"https://apis.google.com/js/api.js"}),await new Promise(t=>gapi.load("client:auth2",t)),await gapi.client.init({apiKey:"AIzaSyD33Rxm4dA34Mh84oSxYTUUF_jyCLLOua4",clientId:"293076144560-r5cear7rprgo094u6ibcd6nl3bbg18te.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:"https://www.googleapis.com/auth/youtube.readonly"});const e=gapi.auth2.getAuthInstance();return e.isSignedIn.get()?f(e.currentUser.get()):t&&(await e.signIn(),f(e.currentUser.get())),s=!0,a}catch(t){console.log(t)}finally{l=!1}}function f(t){const e=document.getElementById("js-google-sign-in-btn");a=!0,function(t){const e=t.getBasicProfile();r={name:e.getName(),email:e.getEmail(),image:e.getImageUrl()}}(t),e.remove(),o.insertAdjacentHTML("afterbegin",`\n    <button id="js-google-panel-toggle-btn" class="btn btn-icon google-panel-toggle-btn"\n    data-disable>\n      <img src="${r.image}" class="google-user-image" alt="">\n    </button>\n  `),document.getElementById("js-google-panel-toggle-btn").addEventListener("click",y)}function b(){const t=gapi.auth2.getAuthInstance();return t.isSignedIn.get()?t.currentUser.get().getAuthResponse().access_token:null}function m(){return r}function p(t,{element:e}){e.insertAdjacentHTML("afterend",`\n    <div id=${t} class="panel google-panel">\n      <div class="google-user">\n        <img src="${r.image}" class="google-user-image" alt="">\n        <div class="google-user-details">\n          <div class="google-user-name">${r.name}</div>\n          <div>${r.email}</div>\n        </div>\n      </div>\n      <button class="btn btn-text google-sign-out-btn"\n      data-item="google-sign-in">Sign Out</button>\n    </div>\n  `)}function y({currentTarget:t}){Object(c.b)("js-google-panel",p,{element:t})}},28:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return k}));n(18),n(58);var i=n(1),c=n(10),o=n(0),r=n(16),a=n(27),s=n(8);let l=null;function u(t){Object(r.a)({title:"YouTube",body:t})}function d(t){if(t.includes("H")||(t="0H"+t),!t.includes("M")){const e=t.indexOf("H")+1;t=`${t.slice(0,e)}0M${t.slice(e)}`}return t.includes("S")||(t+="0"),t.match(/\d{1,}/g).reverse().reduce((t,e,n)=>t+=e*60**n,0)}function f(t,e,n,i,c){const o=Object(a.b)();let r=`part=${e}&${n}=${i}&maxResults=50&key=AIzaSyD33Rxm4dA34Mh84oSxYTUUF_jyCLLOua4`;return c&&(r+="&pageToken="+c),o&&(r+="&access_token="+o),fetch(`https://www.googleapis.com/youtube/v3/${t}?${r}`).then(t=>t.json())}function b(t,e){return t.reduce((t,n)=>(e.some(t=>t.id===n.id)||t.push(n),t),[])}function m(t){return t.filter(t=>{const e=t.snippet.title;return"Deleted video"!==e&&"Private video"!==e})}function p(t){return t.map(t=>{const e=t.snippet.resourceId.videoId;return Object(s.f)(e,{image:{original:{url:t.snippet.thumbnails.medium.url}}}),{id:e,durationInSeconds:t.durationInSeconds,duration:Object(i.b)(t.durationInSeconds),name:t.snippet.title,title:t.snippet.title,artist:"",album:"",artworkId:e,player:"youtube"}})}async function y(t,e){const{error:n,items:i,nextPageToken:c}=await f("playlistItems","snippet","playlistId",t,e);n&&function({code:t,message:e}){throw 403===t?e="You need to be sign in if you want to import private playlists":404===t&&(e="Playlist was not found"),u(e),new Error(e)}(n);const o=p(await async function(t){const e=t.map(t=>t.snippet.resourceId.videoId).join(),n=await f("videos","contentDetails","id",e);return t.reduce((t,e)=>{const i=n.items.find(({id:t})=>t===e.snippet.resourceId.videoId);return i&&(e.durationInSeconds=d(i.contentDetails.duration)-1,t.push(e)),t},[])}(m(i)));if(c){const e=await y(t,c);return o.concat(e)}return o}function v(t,e){return Object(o.i)(t)||Object(o.a)({id:t,type:"grid",storePlaylist:!0,...e})}async function g(t,e){const n=v(t,{title:"YouTube"}),{items:i}=await f("videos","snippet,contentDetails","id",e);if(i.length){const t=b(p(m(i).map(t=>(t.snippet.resourceId={videoId:t.id},t.durationInSeconds=d(t.contentDetails.duration)-1,t))),n.tracks);Object(c.a)(n,t)}else u("Video was not found")}async function j(t,e,n){const i=v(e,{url:t}),r=await y(e);"sync"===n&&Object(c.b)(i),i.title||Object(o.w)(i.id,await async function(t){const{items:e}=await f("playlists","snippet,status","id",t),n="private"===e[0].status.privacyStatus,i={title:e[0].snippet.title,isPrivate:n};return n&&(i.user=Object(a.c)()),i}(e)),Object(c.a)(i,b(r,i.tracks),{type:"sync"})}async function O(t,e){const{videoId:n,playlistId:c}=function(t){let e="",n="";try{const{searchParams:i}=new URL(t);e=i.get("v"),n=i.get("list")}catch(i){const c=t.match(/v=[a-zA-Z0-9\-_]+/),o=t.match(/list=[a-zA-Z0-9\-_]+/);c&&(e=c[0].slice(2)),o&&(n=o[0].slice(5))}return{videoId:e,playlistId:n}}(t),o=c||"youtube";if(n||c)if("WL"!==c){Object(i.a)("import",{importing:!0,option:"youtube",playlistId:o});try{n?await g(o,n):await j(t,o,e)}catch(t){console.log(t)}finally{Object(i.a)("import",{importing:!1,option:"youtube",playlistId:o})}}else u("Importing <b>Watch Later</b> playlist is not allowed");else u("Invalid url")}function h(){return l}async function k(){var t;if(await Object(a.d)()&&!l)try{const e=await f("playlists","snippet,contentDetails","mine",!0);t=e.items,l=t.map(t=>({id:t.id,itemCount:t.contentDetails.itemCount,title:t.snippet.title,thumbnail:t.snippet.thumbnails.medium.url}))}catch(t){console.log(t)}}window.addEventListener("google-sign-out",()=>{l=null})},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"l",(function(){return g})),n.d(e,"j",(function(){return O})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return k})),n.d(e,"b",(function(){return E})),n.d(e,"e",(function(){return I})),n.d(e,"h",(function(){return T})),n.d(e,"g",(function(){return A})),n.d(e,"f",(function(){return B})),n.d(e,"i",(function(){return y})),n.d(e,"k",(function(){return S}));var i=n(5),c=n(0),o=n(1),r=n(4),a=n(6),s=n(15),l=n(2),u=n(45),d=n(16),f=n(33),b=n(34),m=n(35);let p=!0;const y=function(){function t(){return JSON.parse(localStorage.getItem("track"))||{}}function e(t){localStorage.setItem("track",JSON.stringify(t))}function n(){localStorage.removeItem("track")}return{getTrack:t,removeTrack:n,saveTrack:e,updateTrack:function(n){e(Object.assign(t(),n))},initTrack:function(){const e=t();if(!e)return;const{playlistId:o,currentTime:r,name:s}=e,l=Object(c.b)(o,s);l?(Object(c.q)(o,Object(a.a)("shuffle"),l.index),h(l,o,{startTime:r}),Object(i.j)(l,r)):n()}}}();function v(){return p}function g(t){p="boolean"==typeof t?t:!p,p&&(Object(s.d)(),i.a.stop()),j(p),S()}function j(t){const e=document.getElementById("js-play-btn");Object(i.i)(e,t),Object(l.m)(t)}function O({player:t}){"native"===t?b.e(p):"youtube"===t&&m.e(p),g()}async function h(t,e,n={}){const o=Object(a.a)("volume");await async function(t,e,{scrollToTrack:n,startTime:o}){const{rendered:r}=Object(c.k)(e);(t.needsMetadata||t.needsAlbum||t.picture)&&(Object(i.f)(),await Object(f.d)(t)),Object(u.c)(t),Object(i.g)(t.duration,t.durationInSeconds),Object(i.h)(),Object(c.r)(e),Object(c.p)(t.index,e),Object(c.o)(t),r&&-1!==t.index&&(Object(l.k)(t.index,e),n&&Object(l.j)(e)),void 0===o?(p=!1,S(),Object(i.f)(),j(p)):p=!0}(t,e,n),"native"===t.player?b.a(t,o,n.startTime):"youtube"===t.player&&m.a(t.id,o,n.startTime)}function k(){const t=Object(c.d)();t?O(t):w("direction",0,Object(r.c)())}function w(t,e,n,o){if(!n)return;const r=Object(a.a)("shuffle"),s=Object(c.d)(),{shuffled:f}=Object(c.k)(n);if(s&&(Object(l.m)(!0),Object(l.h)(),Object(i.e)(),x(s)),"index"===t){const{tracks:t}=Object(c.i)(n),i=t[e];Object(c.q)(n,r,i.index),h(i,n)}else if("direction"===t){let t=null,i=!1;if(Object(c.g)().length&&f===r||(Object(c.q)(n,r),r&&(i=!0)),navigator.onLine)t=Object(c.e)(n,e);else{const i=[];for(;;){const o=Object(c.e)(n,0===e?1:e);if(i.includes(o.index)){Object(d.a)({body:"Can't play tracks from YouTube white offline"});break}if("youtube"!==o.player){t=o;break}i.push(o.index),Object(c.p)(o.index,n)}}t?(i&&Object(c.u)(t.index),h(t,n,{scrollToTrack:"auto"!==o&&!Object(u.a)()})):$(s)}}function E(t){w("direction",1,Object(c.c)(),t)}function L(){w("direction",-1,Object(c.c)())}function I({currentTarget:t,detail:e,target:n}){const i=Object(r.c)(),a=Object(o.c)("data-btn",n,t),s=Object(o.c)("data-index",n,t);if(!s||!s.elementRef.classList.contains("disabled"))if(2===e&&s&&!a)w("index",s.attrValue,i);else if(a){const t=parseInt(s.attrValue,10),e=Object(c.d)(),n=Object(c.c)();e&&n===i&&t===e.index?O(e):w("index",t,i)}}function x({player:t}){"native"===t?b.d():"youtube"===t&&m.d()}function T(t){t&&x(t),$(t)}function $(t){p=!0,y.removeTrack(),Object(i.g)(),Object(i.d)(),Object(u.b)(),Object(c.o)(),Object(c.r)(),Object(s.d)(),t&&(j(p),Object(l.h)(),Object(i.e)(),Object(i.c)())}function A(t){const e=Object(c.d)()||{};"native"===e.player?b.c(t):"youtube"===e.player&&m.c(t)}function B(t,e){i.a.stop(),"native"===t?b.b(e):"youtube"===t&&m.b(e)}function S(t=Object(r.c)()){const e=v(),n=Object(c.i)(t);let i="Veery";if(e)n&&(i=`${n.title} | ${i}`);else{const{artist:t,name:e,title:n}=Object(c.d)();i=`${t&&n?`${t} - ${n}`:e} | ${i}`}document.title=i}window.addEventListener("track-start",({detail:t})=>{const e=Object(c.c)(),{name:n,duration:o,durationInSeconds:r}=Object(c.d)();Object(s.f)(e),y.saveTrack({name:n,playlistId:e}),i.a.start({currentTime:Math.floor(t),duration:o,durationInSeconds:r}),Object(i.c)()}),window.addEventListener("track-end",()=>{const t=Object(c.d)(),e=Object(a.a)("playback");"track-once"!==e&&("playlist-once"!==e||Object(c.f)()!==Object(c.g)().length-1)?(y.removeTrack(),"repeat"!==e?E("auto"):h(t,Object(c.c)())):T(t)}),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",k),navigator.mediaSession.setActionHandler("pause",k),navigator.mediaSession.setActionHandler("previoustrack",L),navigator.mediaSession.setActionHandler("nexttrack",E))},33:function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return $})),n.d(e,"d",(function(){return x})),n.d(e,"b",(function(){return T}));n(18),n(58);var i=n(93),c=n(1),o=n(0),r=n(10),a=n(70),s=n(2),l=n(14),u=n(16),d=n(13),f=n(8),b=n(4),m=n(9);let p=!1;async function y(t){try{const e="https://ws.audioscrobbler.com/2.0/",n=`?method=track.getInfo&api_key=${"3e8d48b3277c21bc77965345f5faf18c"}&artist=${t.artist}&track=${t.title}&format=json`,i=await fetch(e+n).then(t=>t.json());if(i.track&&i.track.album){const{title:e,image:n}=i.track.album;if(!t.album&&e&&(t.album=e),!t.artworkId&&n){const e=n[n.length-1]["#text"];if(e){const{origin:n,pathname:i}=new URL(e),[c]=i.split("/").slice(-1),o=`${n}/i/u/500x500/${c}`,r=function(t){const e=t.split(".")[1];if("jpg"===e)return"image/jpeg";return"image/"+e}(c),a=await Object(f.d)(o);t.artworkId=a,Object(f.f)(a,{image:{original:{url:o},small:{url:e}},type:r})}}}}catch(t){console.log(t)}}function v(t){return t.map(t=>({needsMetadata:!0,audioTrack:t.audioTrack,name:t.name,title:t.name,artist:"",album:"",durationInSeconds:0,duration:"",player:"native"}))}async function g(t,e,n,i){if(!n.length)return void Object(u.a)({title:t+" files",body:"No valid audio file found."});const o=(a=n,s=e.tracks,a.reduce((t,e)=>{const n=(i=e.name.trim()).slice(0,i.lastIndexOf("."));var i;return s.some(t=>t.name===n)||t.push({audioTrack:e,name:n}),t},[]));var a,s;if(o.length){Object(c.a)("import",{importing:!0,option:t,playlistId:e.id});try{const n=await i(o);Object(r.a)(e,n),async function(){await I(w),I(E),I(L)}()}catch(t){console.log(t)}finally{Object(c.a)("import",{importing:!1,option:t,playlistId:e.id})}}else Object(u.a)({title:t+" files",body:`Track${n.length>1?"s":""} already exist`})}async function j(t){const{artist:e,title:n,album:o,duration:r,picture:a}=await Object(i.a)(t.audioTrack);t.title=n||t.name,t.artist=e||"",t.album=o||"",t.durationInSeconds=r,t.duration=Object(c.b)(r),a&&(t.picture=a),t.album&&a||(t.needsAlbum=!0)}function O(t,e){const n=Object(s.d)(t.index,e.id);p=!0,n&&n.childElementCount&&(n.innerHTML=Object(s.b)(t,e.id,e.type))}function h(t){return new Promise(e=>{const n=new Image,i=document.createElement("canvas"),c=i.getContext("2d");n.crossOrigin="anonymous",n.onload=function(){let{width:o,height:r}=n;const a=Math.min(o,r,256);o<r?(r=a/n.width*r,o=a):(o=a/n.height*o,r=a),i.width=o,i.height=r,c.drawImage(n,0,0,o,r),i.toBlob(e,t.type,.72),URL.revokeObjectURL(n.src)},n.src=URL.createObjectURL(t)})}async function k(t){const[e,n]=await Promise.all([Object(f.c)(t.picture),h(t.picture)]);t.artworkId=e,Object(f.f)(e,{image:{original:{blob:t.picture},small:{blob:n}},type:t.picture.type}),delete t.picture}async function w(t,e){delete t.needsMetadata,await j(t),e.id===Object(b.c)()?O(t,e):Object(d.b)("")&&Object(l.d)(e.id,e.tracks,!1)}async function E(t,e){t.picture&&(await k(t),e.id===Object(b.c)()&&O(t,e))}async function L(t,e){t.needsAlbum&&(delete t.needsAlbum,await y(t),e.id===Object(b.c)()&&O(t,e))}async function I(t){const e=Object(o.i)("local-files");for(const n of e.tracks)try{await t(n,e)}catch(t){if(console.log(t),!Object(o.i)("local-files"))return}Object(d.b)("")?Object(l.d)(e.id,e.tracks):p=!0,e.storePlaylist&&Object(m.a)({action:"update-tracks",artworks:Object(f.b)(),playlist:{id:e.id,tracks:e.tracks}})}async function x(t){const e=Object(o.i)("local-files");t.needsMetadata&&(delete t.needsMetadata,await j(t)),t.picture?await k(t):t.needsAlbum&&(delete t.needsAlbum,await y(t)),e.id===Object(b.c)()?O(t,e):Object(d.b)("")?Object(l.d)(e.id,e.tracks,!0):p=!0,e.storePlaylist&&Object(m.a)({action:"update-tracks",artworks:Object(f.b)(),playlist:{id:e.id,tracks:e.tracks}})}function T(){const t=Object(o.i)("local-files");p&&t&&requestAnimationFrame(()=>{Object(l.d)(t.id,t.tracks)}),p=!1}function $(t){const e=function(t){const e=new Audio,n=[];return t=t.reduce((t,i)=>{if(e.canPlayType(i.type))t.push(i);else if(i.type.startsWith("audio")){const{name:t}=i;n.push(t.slice(t.lastIndexOf(".")))}return t},[]),n.length&&Object(u.a)({title:"Local Files",body:"Can't play audio files with type: "+n.join(", ")}),t}(t),n="local-files";g("local",Object(o.i)(n)||Object(o.a)({id:n,title:"Local Files",type:"list",storePlaylist:a.a.getSetting(n,"storePlaylist")}),e,v)}function A(t){return new Promise(e=>{t.file(e)})}function B(t){return new Promise(e=>{const n=t.createReader(),i=[];!function t(){n.readEntries(async n=>{if(n.length>0){for(const t of n)if(t.isFile){const e=await A(t);i.push(e)}else if(t.isDirectory){const e=await B(t);i.push(...e)}t()}else e(i)})}()})}window.addEventListener("drop",t=>{const{files:e,items:n}=t.dataTransfer;if(t.preventDefault(),e.length)if(n&&n.length&&n[0].webkitGetAsEntry){const t=[],e=[];Object(u.a)({id:"js-upload-notice",body:'\n        <div class="upload-notice">\n        <img src="./assets/images/spinner.svg" alt="">\n        <span>Uploading...</span>\n        </div>\n        '});for(const i of n){const n=i.webkitGetAsEntry();n.isDirectory?e.push(B(n)):n.isFile&&t.push(i.getAsFile())}Promise.all(e).then(e=>{$([...e.flat().concat(t)])}).catch(t=>{console.log(t)}).finally(()=>{document.getElementById("js-upload-notice").remove()})}else $([...e])}),window.addEventListener("dragover",t=>{t.preventDefault()})},34:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return m}));n(18),n(58);var i=n(1),c=n(3),o=n(5),r=n(16),a=n(0);const s=[];let l,u;function d(t,e,n){l=URL.createObjectURL(t.audioTrack),u=new Audio(l),u.onplaying=function(){Object(i.a)("track-start",u.currentTime)},u.onerror=function(t){const e=Object(a.d)();s.includes(e.name)?(Object(c.h)(e),s.length=0):(Object(o.c)(),s.push(e.name),Object(c.b)()),Object(r.a)({title:"Cannot play "+e.name,body:"Its path or name might have changed"}),console.log(t)},m(e),"number"!=typeof n?u.play():p(n)}function f(t){t?u.play():u.pause()}function b(){u.pause(),u.onplaying=null,u.onerror=null,u.currentTime=0,u=null,l&&(URL.revokeObjectURL(l),l=null)}function m(t){u.volume=t}function p(t){u.currentTime=t}},35:function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"d",(function(){return j})),n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return O}));var i=n(1),c=n(3),o=n(16),r=n(5),a=n(0);let s=!1,l=null,u=!1,d=null,f=!1;function b({data:t}){const e=Object(a.d)();e&&"youtube"===e.player&&(1===t?(f||Object(c.l)(!1),f=!1,Object(i.a)("track-start",l.getCurrentTime())):2===t?(f||Object(c.l)(!0),f=!1,Object(r.c)()):3===t?(r.a.stop(),Object(r.f)()):Object(r.c)())}function m(){const{id:t,volume:e,startTime:n}=d;s=!0,"number"==typeof n?(O(e),l.cueVideoById(t,n),u=!0):g(t,e)}function p(t){let e="";if(100===t.data?e="Video is either removed or marked as private":101!==t.data&&150!==t.data||(e="The owner of the requested video does not allow it to be played in embedded players"),console.log(t),e){const t=Object(a.c)(),n=Object(a.d)(),{name:i}=Object(a.e)(t,1);n.name===i?Object(c.h)(n):Object(c.b)(),Object(o.a)({title:"Cannot play "+n.name,body:e})}}function y(){l=new YT.Player("js-yt-player",{playerVars:{autoplay:0,disablekb:1,controls:0,fs:0,iv_load_policy:3},events:{onReady:m,onStateChange:b,onError:p}})}function v(t){s&&(f=!0,u=!1,t?l.playVideo():l.pauseVideo())}function g(t,e,n){if(s)return O(e),void l.loadVideoById(t,n);d={id:t,volume:e,startTime:n},window.onYouTubeIframeAPIReady=y,i.h.load({src:"https://www.youtube.com/iframe_api"})}function j(){s&&(Object(r.c)(),l.stopVideo(),u=!1)}function O(t){s&&l.setVolume(100*t)}function h(t){s&&(u?l.cueVideoById(d.id,t):l.seekTo(t,!0))}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return y}));var i=n(1),c=n(13),o=n(4),r=n(7),a=n(0),s=n(26),l=n(10);function u(){const t="js-move-to-panel-container";document.getElementById("js-playlist-tab-header-items").insertAdjacentHTML("afterbegin",`\n    <div id="${t}" class="playlist-tab-header-item" data-move-to>\n      <button class="btn btn-icon" data-item="move-to" title="Move to">\n        ${Object(i.d)({iconId:"move-to"})}\n      </button>\n    </div>\n  `),document.getElementById(t).addEventListener("click",f)}function d(){const t=document.getElementById("js-move-to-panel-container");t.removeEventListener("click",f),t.remove()}function f({currentTarget:t,target:e}){const n=Object(i.c)("data-panel-item",e,t);if(!n)return;const{attrValue:u,elementRef:d}=n;"btn"===u?(Object(l.c)("move-to",d.parentElement,"beforeend",b),d.remove()):(t.removeEventListener("click",f),function(t){const e=Object(s.c)(),{tracks:n}=Object(o.b)(),i=Object(a.i)(t),r=n.filter(n=>e.includes(n.index)&&!Object(a.b)(t,n.name)).map(t=>({...t}));Object(l.a)(i,r),Object(c.e)("playlist/"+i.id)}(u),Object(r.a)(),Object(s.a)())}function b(t){const e=document.getElementById("js-move-to-list"),n=Object(o.c)();Object(l.f)(t),e?e.innerHTML=m(n):t.target.insertAdjacentHTML("beforebegin",p(n))}function m(t){return Object(a.h)().reduce((e,n)=>(n.id!==t&&(e+=`\n      <li data-panel-item="${n.id}">\n      <button class="btn btn-icon move-to-list-item-btn">${n.title}</button>\n      </li>\n      `),e),"")}function p(t){const e=m(t);return e?`<ul id="js-move-to-list" class="move-to-list">${e}</ul>`:""}function y(t,{playlistId:e}){document.getElementById("js-move-to-panel-container").insertAdjacentHTML("beforeend",`\n    <div id="${t}" class="panel move-to-panel">\n      <h3 class="panel-title move-to-panel-title">Move to</h3>\n      ${p(e)}\n      <button class="btn btn-icon move-to-new-pl-btn" data-panel-item="btn">\n        ${Object(i.d)({iconId:"plus"})}\n        <span>Create new playlist</span>\n      </button>\n    </div>\n  `)}},38:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l}));var i=n(4),c=n(2);const o={};function r(t){t.forEach(({isIntersecting:t,target:e})=>{const n=!e.childElementCount;t&&n?function(t){const{id:e,tracks:n,type:o}=Object(i.b)(),r=n[t.getAttribute("data-index")];t.innerHTML=Object(c.b)(r,e,o)}(e):t||n||e.contains(document.activeElement)||(e.innerHTML="")})}function a(t){if(!IntersectionObserver||o[t])return;o[t]=new IntersectionObserver(r,{root:Object(i.a)(t),rootMargin:"120px 0px"});const{children:e}=Object(c.c)(t);!function(t,e){e.forEach(e=>{o[t].observe(e)})}(t,Array.from(e))}function s(t){o[t]&&l(t),a(t)}function l(t){o[t]&&(o[t].disconnect(),delete o[t])}},4:function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return j}));var i=n(2),c=n(1),o=n(15),r=n(7),a=n(33),s=n(0),l=n(26),u=n(44),d=n(37),f=n(43),b=n(3);const m=document.getElementById("js-tab-header"),p=matchMedia("(max-width: 540px)");let y="";function v(){return y}function g(){return Object(s.i)(y)}function j(t){return document.getElementById("js-tab-"+t)}m.addEventListener("click",({currentTarget:t,target:e})=>{const n=Object(c.c)("data-item",e,t);if(!n)return;const o=g(),a=n.attrValue;"move-to"===a?Object(r.b)("js-move-to-panel",d.b,{playlistId:o.id,element:n.elementRef}):"list"!==a&&"grid"!==a||a===o.type?"sorting"===a?Object(r.b)("js-sort-panel",u.b,{sortedBy:o.sortedBy,element:n.elementRef}):"order"===a&&o.sortedBy?Object(u.a)(o):"sidebar"===a&&document.getElementById("js-sidebar-container").classList.remove("hidden"):Object(i.a)(o,a)}),window.addEventListener("route-change",({detail:{isPlaylistTab:t,tabId:e}})=>{const n=j(y);Object(c.g)(".sidebar-entry.active","active"),Object(c.g)(".tab.active","active"),function(t=""){y=t}(t?e:""),n&&n.removeEventListener("click",b.e),t?(!function(t){const e=Object(s.i)(t),{rendered:n}=Object(s.k)(t);n||Object(i.g)(e),Object(i.i)(t),"list"===e.type&&p.matches?Object(i.a)(e,"grid"):Object(i.l)(e.type),Object(u.c)(e),Object(l.b)(e),Object(f.b)(),e.tracks.length&&j(t).addEventListener("click",b.e)}(e),m.classList.add("playlist-tab-active")):(m.classList.remove("playlist-tab-active"),"home"===e&&Object(a.b)()),Object(b.k)(e),j(e).classList.add("active"),"not-found"!==e&&Object(o.c)(e).classList.add("active")}),p.onchange=function({matches:t}){const e=g();t&&e&&"list"===e.type&&Object(i.a)(e,"grid")}},43:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return b}));var i=n(1),c=n(4),o=n(0),r=n(2);const a=document.getElementById("js-filter-input"),s=a.parentElement;let l=0,u="";function d(t,e,n,i){const c=new RegExp(i,"i"),{sortOrder:r}=Object(o.k)(t);e.forEach(t=>{const e=n[r.indexOf(t.index)],i=`${t.title}\n${t.artist}\n${t.album}`;e.classList.toggle("hidden",!c.test(i))})}function f(t,e=""){const{tracks:n}=Object(o.i)(t);if(!n.length)return;const{children:i}=Object(r.c)(t);var c;u=e?t:"",d(t,n,i,e),c=e,document.getElementById("js-clear-input-btn").classList.toggle("visible",c)}function b(){u&&(a.value="",f(u))}function m(){s.classList.remove("active"),a.removeEventListener("keyup",p),a.removeEventListener("blur",m)}function p({target:t}){const e=Object(c.c)();clearTimeout(l),l=setTimeout(f,400,e,t.value)}a.addEventListener("focus",({currentTarget:t})=>{s.classList.add("active"),t.addEventListener("keyup",p),t.addEventListener("blur",m)}),s.addEventListener("click",({target:t})=>{const e=Object(i.c)("data-filter-item",t);if(!e)return;const n=e.attrValue;"icon"===n?a.focus():"button"===n&&(b(),m())})},44:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return b}));var i=n(4),c=n(7),o=n(9),r=n(0),a=n(2),s=n(43);function l(t){document.getElementById("js-order-toggle").querySelector("use").setAttribute("href",`#${1===t?"down":"up"}-arrow`)}function u(t,e){const{value:n}=document.getElementById("js-filter-input");if(t.order=t.sortedBy===e&&1===t.order?-1:1,t.sortedBy=e,Object(r.t)(t),Object(r.v)(t.id),Object(a.n)(t),n){const{children:e}=Object(a.c)(t.id);Object(s.a)(t.id,t.tracks,e,n)}t.storePlaylist&&Object(o.a)({action:"change-sorting",playlist:{order:t.order,id:t.id,sortedBy:e}})}function d({sortedBy:t,order:e}){var n;n=t,document.getElementById("js-sort-toggle").textContent=n,l(e)}function f(t,{sortedBy:e}){document.getElementById("js-sort-panel-container").insertAdjacentHTML("beforeend",function(t,e){return`<ul id="${t}" class="panel sort-panel">${function(t){return["index","title","artist","album","duration"].reduce((e,n)=>`\n      ${e}\n      <li>\n        <button class="btn btn-icon sort-option-btn${n===t?" active":""}" data-sort="${n}">\n          ${n}\n        </button>\n      </li>\n    `,"")}(e)}</ul>`}(t,e)),document.getElementById(t).addEventListener("click",m)}function b(t){u(t,t.sortedBy),l(t.order)}function m({currentTarget:t,target:e}){const n=e.getAttribute("data-sort"),o=Object(i.b)();t.removeEventListener("click",m),Object(c.a)(),n!==o.sortedBy&&(d({sortedBy:n,order:1}),u(o,n))}},45:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return k}));n(87),n(18);var i=n(1),c=n(13),o=n(3),r=n(0),a=n(2),s=n(4),l=n(8);const u=document.getElementById("js-now-playing"),d=document.getElementById("js-media-container");let f=!1,b=0;function m(){return f}function p({currentTarget:t,target:e}){const n=Object(i.c)("data-item",e);if(n&&"image"===n.attrValue){const e=document.getElementById("js-media-state-icon");Object(o.j)(Object(r.d)()),e&&e.remove(),t.insertAdjacentHTML("beforeend",`\n      <svg viewBox="0 0 24 24" id="js-media-state-icon" class="media-state-icon">\n        <use href="#${Object(o.a)()?"pause":"play"}"/>\n      </svg>\n    `),clearTimeout(b),b=setTimeout(()=>{document.getElementById("js-media-state-icon").remove()},1e3)}}function y(){const t=document.activeElement;t instanceof HTMLIFrameElement&&requestAnimationFrame(()=>{t.blur()})}function v(t){27===t.which&&f&&g(!1)}function g(t=!f){const e=document.getElementById("js-media-toggle-btn"),n=document.getElementById("js-yt-player");if(d.classList.toggle("visible",t),f=t,t){const t=Object(r.d)();d.addEventListener("click",p),window.addEventListener("keydown",v),window.addEventListener("blur",y),Object(i.i)(e,{title:"Collapse",id:"collapse"}),n.removeAttribute("tabindex"),"native"===(null==t?void 0:t.player)&&(document.getElementById("js-player-controls").classList.add("transparent"),d.classList.add("image"))}else d.removeEventListener("click",p),window.removeEventListener("keydown",v),window.removeEventListener("blur",y),Object(i.i)(e,{title:"Expand",id:"expand"}),n.setAttribute("tabindex","-1"),document.getElementById("js-player-controls").classList.remove("transparent"),d.classList.remove("image")}function j(){const t=document.getElementById("js-track-info");t&&t.remove()}function O(t="./assets/images/album-art-placeholder.png"){document.getElementById("js-artwork").src=t}function h(t){const{image:e,type:n}=Object(l.a)(t.artworkId);!function(t,e){j(),O(e),u.classList.remove("inactive"),u.insertAdjacentHTML("beforeend",function(t){let e=t.name,n=null;t.artist&&t.title?(e=`${t.artist} - ${t.title}${t.album?" - "+t.album:""}`,n=`\n      <div class="track-info-item track-title" data-action="reveal-track">${t.title}</div>\n      <div class="track-info-item">${t.artist}${t.album?" - "+t.album:""}</div>\n    `):n=`<div class="track-info-item track-name" data-action="reveal-track">${t.name}</div>`;return`<div id="js-track-info" class="track-info" title="${e.replace(/"/g,"&quot;")}">${n}</div> `}(t))}(t,e.small.url),function(t,{original:e,small:n}){const i=document.getElementById("js-media-image-container");if("native"===t){const[t,c]=i.children;if(e.url!==c.src){const i=c.cloneNode();i.onload=function(){const o=e.url.includes("placeholder");t.classList.toggle("hidden",o),i.classList.toggle("shadow",!o),c.replaceWith(i),t.src=n.url,i.onload=null},i.src=e.url}i.classList.remove("hidden")}else i.classList.add("hidden")}(t.player,e),"mediaSession"in navigator&&"youtube"!==t.player&&(navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.artist,album:t.album,artwork:[{src:e.original.url,sizes:"512x512",type:n},{src:e.small.url,sizes:"256x256",type:n}]}))}function k(){document.title="Veery",u.classList.add("inactive"),O(),j(),g(!1),"mediaSession"in navigator&&(navigator.mediaSession.metadata=null)}u.addEventListener("click",t=>{const e=Object(i.c)("data-action",t.target);e&&("toggle-media"===e.attrValue?g():"reveal-track"===e.attrValue&&function(){const t=Object(r.c)();t&&(t!==Object(s.c)()?Object(c.e)("playlist/"+t):Object(a.i)(t),f&&g(!1))}())})},5:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return g})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return T})),n.d(e,"g",(function(){return A})),n.d(e,"e",(function(){return k})),n.d(e,"h",(function(){return B})),n.d(e,"d",(function(){return S}));n(18);var i=n(1),c=n(6),o=n(0),r=n(2),a=n(3);const s=document.getElementById("js-volume-slider"),l=document.getElementById("js-track-slider"),u=document.getElementById("js-player-controls");let d=!1,f=null,b=0;const m=function(){let t=0;function e(){clearTimeout(t)}function n(e,c,o){const r=performance.now()-c-o;d||T(e,e.currentTime),a.i.updateTrack({currentTime:e.currentTime}),e.currentTime<=e.durationInSeconds?(e.currentTime+=1,o+=1e3,t=setTimeout(n,1e3-r,e,c,o)):Object(i.a)("track-end")}return{stop:e,start:function(t){const i=performance.now();e(),n(t,i,0)}}}();function p(){const t=document.getElementById("js-play-btn");if(t.querySelector(".play-pause-btn-spinner"))return;const e=Object(r.e)(),n='\n    <svg viewBox="0 0 100 100" class="play-pause-btn-spinner">\n      <use href="#spinner"/>\n    </svg>\n  ';e&&(f=e,e.insertAdjacentHTML("beforeend",n)),t.insertAdjacentHTML("beforeend",n)}function y(){const t=Object(r.e)();f&&(v(f),f=null),t&&v(t),v(document.getElementById("js-play-btn"))}function v(t){const e=t.querySelector(".play-pause-btn-spinner");e&&e.remove()}function g(t){return t?{id:"play-circle",title:"Play"}:{id:"pause-circle",title:"Pause"}}function j(t,e){Object(i.i)(t,g(e))}function O(t){const e=document.getElementById("js-volume-icon"),n={on:{id:"volume-off",title:"Unmute"},off:{id:"volume",title:"Mute"}};Object(i.i)(e,t?n.on:n.off)}function h(t,e){const{left:n,width:i}=document.getElementById(`js-${t}-slider`).getBoundingClientRect();let c=(e-n)/i*100;return c<0?c=0:c>100&&(c=100),c}function k(){m.stop(),T()}function w(t){Object(c.c)("volume",t),$(t),Object(a.g)(t)}function E(t,e){const n=e/2;return t+n+8>window.innerWidth||t-n-8<0}function L(t,e){return`calc(${t}% - ${e}px)`}function I(t,e){const n=document.getElementById("js-volume-slider-label");n.textContent=Math.floor(t)+"%";const i=n.offsetWidth;E(e,i)||(n.style.left=L(t,i/2))}function x(t,e){document.getElementById(`js-${t}-slider-thumb`).style.left=100*e+"%",document.getElementById(`js-${t}-slider-elapsed`).style.transform=`scaleX(${e})`}function T(t,e=0){let n=1,c="0:00";t&&(n=t.durationInSeconds,c=t.duration);const o=Object(i.b)(e,n>=3600);d||(document.getElementById("js-track-current").textContent=o),x("track",e/n),l.setAttribute("aria-valuenow",e),l.setAttribute("aria-valuetext",`${o} of ${c}`)}function $(t){const e=Math.floor(100*t);x("volume",t),s.setAttribute("aria-valuenow",e),s.setAttribute("aria-valuetext",e+"% volume")}function A(t="0:00",e=0){document.getElementById("js-track-duration").textContent=t,l.setAttribute("aria-valuemax",e)}function B(){l.classList.add("visible")}function S(){l.classList.remove("visible")}function M(t,e){const n=h("track",t);return{percent:n,currentTime:Math.floor(e*n/100)}}function P(t){document.getElementById(`js-${t}-slider-label`).classList.add("visible")}function H(t){document.getElementById(`js-${t}-slider-label`).classList.remove("visible")}function R(t,e,n){const c=document.getElementById("js-track-slider-label");c.textContent=Object(i.b)(e);const o=c.offsetWidth;E(n,o)||(c.style.left=L(t,o/2))}function C({pageX:t}){const e=Object(o.d)(),{percent:n,currentTime:i}=M(t,e.durationInSeconds);T(e,i),R(n,i,t)}function q({pageX:t}){const e=Object(o.d)();if(!e)return;const{percent:n,currentTime:i}=M(t,e.durationInSeconds);R(n,i,t)}function V({pageX:t}){const e=Object(o.d)();if(d=!1,e){const{currentTime:n}=M(t,e.durationInSeconds);T(e,n),Object(a.f)(e.player,n),a.i.updateTrack({currentTime:n})}H("track"),window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",V),l.addEventListener("pointermove",q)}function U({pageX:t}){const e=h("volume",t),n=e/100;n!==Object(c.a)("volume")&&(I(e,t),n?(K(),w(n)):z(!0))}function D({pageX:t}){I(h("volume",t),t)}function N(){H("volume"),window.removeEventListener("pointermove",U),window.removeEventListener("pointerup",N),s.addEventListener("pointermove",D)}function W(t,e){let n=t.getAttribute("data-mode");const i={normal:{name:"repeat",nextTitle:"Play track once",currentTitle:"Repeat track",iconId:"repeat"},repeat:{name:"track-once",nextTitle:"Play playlist once",currentTitle:"Play track once",iconId:"repeat-once"},"track-once":{name:"playlist-once",nextTitle:"Repeat playlist",currentTitle:"Play playlist once",iconId:"repeat-once"},"playlist-once":{name:"normal",nextTitle:"Repeat track",currentTitle:"Repeat playlist",iconId:"repeat"}};if(e){for(const[t,c]of Object.entries(i))if(e===c.name){n=t;break}}else _(t,i[n].currentTitle);const{name:o,nextTitle:r,iconId:a}=i[n];"normal"===o?t.classList.remove("active"):t.classList.add("active"),t.setAttribute("data-mode",o),t.setAttribute("title",r),t.querySelector("use").setAttribute("href","#"+a),Object(c.c)("playback",o)}function _(t,e){const n=document.getElementById("js-control-btn-label");n&&n.remove(),t.parentElement.insertAdjacentHTML("afterbegin",`\n    <div id="js-control-btn-label" class="control-btn-label">${e}</div>\n  `),clearTimeout(b),b=setTimeout(()=>{document.getElementById("js-control-btn-label").remove()},1e3)}function K(){const t=Object(c.a)("mute");t&&(Object(c.b)("volumeBeforeMute"),Object(c.c)("mute",!t),O(!t))}function z(t=!Object(c.a)("mute")){!function(t){const e=t?0:Object(c.a)("volumeBeforeMute");t?Object(c.c)("volumeBeforeMute",Object(c.a)("volume")):Object(c.b)("volumeBeforeMute"),w(e)}(t),Object(c.c)("mute",t),O(t)}function Y({attrValue:t,elementRef:e}){switch(t){case"play":Object(a.d)();break;case"next":Object(a.b)();break;case"previous":Object(a.c)();break;case"playback":W(e);break;case"mute":z();break;case"shuffle":!function(t){const e=!Object(c.a)("shuffle");Object(c.c)("shuffle",e),_(t,e?"Shuffle":"No shuffle"),t.classList.toggle("active"),t.querySelector("title").textContent=e?"No shuffle":"Shuffle"}(e.parentElement)}}function F(t){let e=Object(c.a)("volume");if(e<1&&"ArrowUp"===t)e||K(),e+=.05,e>1&&(e=1);else if(e&&"ArrowDown"===t&&(e-=.05,e<=0))return e=0,void z(!0);w(e)}function X(t){const e=Object(o.d)();if(!e)return;const n=e.durationInSeconds;let{currentTime:i}=a.i.getTrack();"ArrowRight"===t||"ArrowUp"===t?(i+=5,i>n&&(i=n)):"ArrowLeft"!==t&&"ArrowDown"!==t||(i-=5,i<0&&(i=0)),T(e,i),Object(a.f)(e.player,i),a.i.updateTrack({currentTime:i})}function J(t){return function({pageX:e}){const n=document.getElementById(`js-${t}-slider-label`),i=window.innerWidth,c=n.offsetWidth/2;if(e+c+8>i){const e=h(t,i-c-8);n.style.left=L(e,c)}else if(e-c-8<0){const e=h(t,c+8);n.style.left=L(e,c)}}}window.addEventListener("keydown",t=>{const e=t.ctrlKey||t.shiftKey||t.altKey||t.metaKey,{target:n,key:c}=t;n instanceof HTMLInputElement&&"text"===n.type||e||("p"===c?Object(a.d)():"m"===c?z():"["===c?Object(a.b)():"o"===c?Object(a.c)():c.startsWith("Arrow")&&"slider"!==n.getAttribute("role")&&!Object(i.e)(n)&&("ArrowUp"===c||"ArrowDown"===c?F(c):"ArrowRight"!==c&&"ArrowLeft"!==c||X(c)))}),l.addEventListener("pointerdown",t=>{1===t.which&&Object(o.d)()&&(d=!0,P("track"),C(t),l.removeEventListener("pointermove",q),window.addEventListener("pointermove",C),window.addEventListener("pointerup",V))}),l.addEventListener("pointermove",q),l.addEventListener("pointerenter",J("track")),l.addEventListener("keydown",({key:t})=>{t.startsWith("Arrow")&&X(t)}),s.addEventListener("pointerdown",t=>{1===t.which&&(P("volume"),U(t),s.removeEventListener("pointermove",D),window.addEventListener("pointermove",U),window.addEventListener("pointerup",N))}),s.addEventListener("pointermove",D),s.addEventListener("pointerenter",J("volume")),s.addEventListener("keydown",({key:t})=>{t.startsWith("Arrow")&&F(t)}),u.addEventListener("click",({target:t})=>{const e=Object(i.c)("data-item",t);e&&Y(e)}),u.addEventListener("keyup",({target:t,key:e})=>{const n=Object(i.c)("data-item",t);"INPUT"===(null==n?void 0:n.elementRef.nodeName)&&"Enter"===e&&Y(n)}),document.getElementById("js-volume-toggle-btn").addEventListener("click",({currentTarget:t})=>{t.classList.toggle("active"),document.getElementById("js-volume-controls").classList.toggle("visible")}),$(Object(c.a)("volume")),Array.from(u.querySelectorAll("[data-item]")).forEach(t=>{const e=t.getAttribute("data-item"),n=Object(c.a)(e);n&&("playback"===e?W(t,n):"mute"===e?O(n):"shuffle"===e&&t.parentElement.classList.add("active"))})},6:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));const i=Object.assign({playback:"normal",shuffle:!1,mute:!1,volume:.4},JSON.parse(localStorage.getItem("settings"))||{});function c(t,e){i[t]=e,a(i)}function o(t){return i[t]}function r(t){delete i[t],a(i)}function a(t){localStorage.setItem("settings",JSON.stringify(t))}},7:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i=n(1);let c=null;function o(){window.removeEventListener("click",s,!0),c.element.remove(),c=null}function r(t,e,n={}){e(t,n),c={id:t,element:document.getElementById(t),removeOnClick:n.removeOnClick,initiator:n.element},window.addEventListener("click",s,!0)}function a(t,e,n){if(c){const i=c.id;o(),i!==t&&r(t,e,n)}else r(t,e,n)}function s({target:t}){if(c.removeOnClick)return void o();const{element:e,initiator:n}=c,r=Object(i.f)(t,e),a=!!n&&Object(i.f)(t,n);r&&a&&o()}},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n(18);var i=n(1),c=n(7),o=n(27),r=n(33),a=n(28),s=n(15),l=n(14);const u=document.getElementById("js-import-options"),d=function(){const t={"local-files":{storePlaylist:!1},dropbox:{storePlaylist:!1},...JSON.parse(localStorage.getItem("import-settings"))};return{setSetting:function(e,n,i){t[e][n]=i,localStorage.setItem("import-settings",JSON.stringify(t))},getSetting:function(e,n){return t[e]?t[e][n]:null},getSettings:function(){return t}}}();function f({children:t},e){Array.from(t).forEach(t=>{let n=null;t.hasAttribute("data-item")?n=t:t.querySelector("[data-item]")&&(n=t.querySelector("[data-item]")),n&&(n.classList.toggle("spinner",e),n.disabled=e)})}function b(t){document.getElementById("js-import-form").removeEventListener("submit",g),t.removeEventListener("click",m),t.remove()}function m({target:t,currentTarget:e}){if(t===e||Object(i.c)("data-cancel-btn",t,e))return void b(e);const n=Object(i.c)("data-id",t,e);if(n)return Object(a.a)("https://youtube.com/playlist?list="+n.attrValue),void b(e);const o=Object(i.c)("data-info-btn",t,e);if(o){const{elementRef:t}=o;Object(c.b)("js-youtube-info-panel",j,{element:t})}}function p(){const t=function(){const t=Object(a.c)();if(!t)return"";return`\n    <h4 class="youtube-modal-section-title">Your Playlists</h4>\n    <ul class="youtube-modal-playlists">${t.reduce((t,e)=>`\n      ${t}\n      <li class="youtube-modal-playlist">\n        <button class="youtube-modal-playlist-btn" data-id="${e.id}">\n          <div class="youtube-modal-playlist-thumb-container">\n            <img src="${e.thumbnail}" alt="" class="youtube-modal-playlist-thumb">\n          </div>\n          <div class="youtube-modal-playlist-content">\n            <div>${e.title}</div>\n            <div class="youtube-modal-playlist-info">${e.itemCount} item${1===e.itemCount?"":"s"}</div>\n          </div>\n          <span class="youtube-modal-playlist-action">Import</span>\n        </button>\n      </li>\n    `,"")}</ul>\n  `}();u.insertAdjacentHTML("beforeend",`\n    <div id="js-youtube-modal" class="youtube-modal-container">\n      <div class="youtube-modal">\n        <h3 class="youtube-modal-title">YouTube Import</h3>\n        <form id="js-import-form" class="youtube-modal-form">\n          <div class="youtube-modal-form-input-container">\n            <input type="text" name="url" class="input youtube-modal-form-input" placeholder="URL" required>\n            <button type="button"\n              class="btn btn-icon youtube-modal-form-info-btn" data-info-btn>\n              <svg viewBox="0 0 24 24">\n              <use href="#info"></use>\n              </svg>\n            </button>\n          </div>\n          <button class="btn youtube-modal-form-submit-btn">Import</button>\n        </form>\n        ${t}\n        <div class="youtube-modal-footer">\n          <button class="btn btn-text" data-cancel-btn>Cancel</button>\n        </div>\n      </div>\n    </div>\n  `),document.getElementById("js-youtube-modal").addEventListener("click",m),document.getElementById("js-import-form").addEventListener("submit",g)}function y({target:t}){Object(r.c)([...t.files]),t.value="",t.removeEventListener("change",y),t.remove()}function v(t){const e=document.getElementById("js-file-picker")||function(){const t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("id","js-file-picker"),t.setAttribute("accept","audio/*"),t.classList.add("file-picker"),t.addEventListener("change",y),document.body.appendChild(t),t}();"file"===t?(e.removeAttribute("webkitdirectory"),e.removeAttribute("directory"),e.removeAttribute("allowdirs"),e.setAttribute("multiple","")):"folder"===t&&(e.removeAttribute("multiple"),e.setAttribute("webkitdirectory",""),e.setAttribute("directory",""),e.setAttribute("allowdirs","")),e.click()}function g(t){const e=t.target.elements.url.value.trim();e&&(Object(a.a)(e),b(document.getElementById("js-youtube-modal"))),t.preventDefault()}function j(t,{element:e}){e.insertAdjacentHTML("afterend",`\n    <div id="${t}" class="panel info-panel">\n    <h3 class="panel-title">Accepted formats:</h3>\n      <ul>\n        <li class="info-panel-content-item">youtube.com/playlist?list={playlistId}</li>\n        <li class="info-panel-content-item">youtube.com/watch?v={videoId}</li>\n      </ul>\n    </div>\n  `)}function O(t,{element:e}){const n=d.getSettings();e.insertAdjacentHTML("afterend",`\n    <div id="${t}" class="panel import-settings-panel">\n      <h3 class="panel-title">Settings</h3>\n      <label class="checkbox-container import-setting">\n        <input type="checkbox" class="sr-only checkbox-input"\n          ${n["local-files"].storePlaylist?"checked":""} data-id="local-files">\n        <div class="checkbox">\n          <div class="checkbox-tick"></div>\n        </div>\n        <span class="checkbox-label">Store <b>Local Files</b> playlist</span>\n      </label>\n      <label class="checkbox-container import-setting">\n        <input type="checkbox" class="sr-only checkbox-input"\n          ${n.dropbox.storePlaylist?"checked":""} data-id="dropbox">\n        <div class="checkbox">\n          <div class="checkbox-tick"></div>\n        </div>\n        <span class="checkbox-label">Store <b>Dropbox</b> playlist</span>\n      </label>\n      <div class="import-setting-message">\n        <svg viewBox="0 0 24 24">\n        <use href="#info"></use>\n        </svg>\n        <span>Stored playlists will persist through reload</span>\n      </div>\n    </div>\n  `),document.getElementById(t).addEventListener("change",h)}function h({target:t}){const e=t.getAttribute("data-id");d.setSetting(e,"storePlaylist",t.checked)}u.addEventListener("click",async({currenTarget:t,target:e})=>{const c=Object(i.c)("data-item",e,t);if(!c||c.elementRef.disabled)return;const{attrValue:r,elementRef:s}=Object(i.c)("data-option",e,t);if("local"===r)v(c.attrValue);else if("dropbox"===r){const{showDropboxChooser:t}=await n.e(2).then(n.bind(null,143));t()}else"youtube"===r&&async function(t,e){f(e,!0),"modal-toggle"===t?(await Object(a.b)(),p()):"google-sign-in"===t&&await Object(o.a)(),f(e,!1)}(c.attrValue,s)}),document.getElementById("js-import-settings-btn").addEventListener("click",({currentTarget:t})=>{Object(c.b)("js-import-settings-panel",O,{element:t})}),window.addEventListener("import",({detail:t})=>{const{importing:e,option:n,playlistId:i}=t;f(document.querySelector(`[data-option=${n}]`),e),function(t,e){const n=Object(s.c)(t),i=Object(l.b)(t);n&&n.classList.toggle("show-spinner",e),i&&(i.disabled=e,i.classList.toggle("spinner",e))}(i,e)}),window.addEventListener("connectivity-status",({detail:t})=>{if(!t){const t=document.getElementById("js-youtube-modal");t&&b(t)}u.querySelectorAll("[data-disable]").forEach(e=>{e.disabled=!t})})},8:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l}));n(117),n(18),n(58);const i={};function c(t){for(const e of t)i[e.id]=e}function o(){return i}function r(t,e){i[t]||(e.id=t,i[t]=e)}function a(t){if(t){const e=i[t],{original:n,small:c}=e.image;return n.blob&&!n.url&&(n.url=URL.createObjectURL(n.blob)),c?c.blob&&!c.url&&(c.url=URL.createObjectURL(c.blob)):e.image.small={url:n.url},e}const e="assets/images/album-art-placeholder.png";return{image:{original:{url:e},small:{url:e}}}}async function s(t){if(!t)return;return u(await t.arrayBuffer())}function l(t){return u(new TextEncoder("utf-8").encode(t).buffer)}async function u(t){const e=await crypto.subtle.digest("SHA-256",t);return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(13),c=n(0),o=n(10),r=n(14),a=n(3),s=n(8);const l=new Worker("./ww.js");function u(t){l.postMessage(t)}l.onmessage=function({data:{artworks:t,playlists:e}}){Object(s.e)(t),e.forEach(t=>{Object(o.e)(Object(c.a)(t))}),Object(r.c)(e.filter(t=>t.syncOnInit)),a.i.initTrack(),Object(i.d)()},l.onerror=function(t){console.log(t)}},97:function(t,e,n){}});