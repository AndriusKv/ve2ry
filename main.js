!function(t){function e(e){for(var i,r,a=e[0],l=e[1],c=e[2],u=0,m=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);for(d&&d(e);m.length;)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={0:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var d=l;s.push([121,1]),n()}({121:function(t,e,n){"use strict";n.r(e);n(83),n(84),n(85),n(86),n(13),n(6),n(17);const i=function(){const t=[];return{load:function(e){return t.includes(e.src)?Promise.resolve():new Promise(n=>{const i=document.createElement("script");Object.keys(e).forEach(t=>{i.setAttribute(t,e[t])}),document.getElementsByTagName("body")[0].appendChild(i),t.push(e.src),i.onload=n})}}}();function o(t){t.remove()}function s(t,e){const n=document.querySelector(t);n&&n.classList.remove(e)}function r(t,e,n){for(void 0===n&&(n=null);e&&e!==n;){if(e.hasAttribute(t))return{elementRef:e,attrValue:e.getAttribute(t)};e=e.parentElement}}function a(t,e){return!!e&&!e.contains(t)}function l(t,e){return void 0===e&&(e=!0),e&&t<10?"0"+t:t}function c(t,e){void 0===e&&(e=!1);const n=function(t){return Math.floor(t/3600)}(t),i=function(t){return Math.floor(t/60%60)}(t),o=function(t){return t%60}(t);return((e=e||n)?n+":":"")+l(i,e)+":"+l(o)}function d(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}function u(t){return"object"==typeof t?URL.createObjectURL(t):t}function m(t,e){let{id:n,title:i}=e;t.setAttribute("title",i),t.querySelector("use").setAttribute("href","#"+n)}function f(t){let e=t.length;for(;e;){const n=Math.floor(Math.random()*e);e-=1,[t[e],t[n]]=[t[n],t[e]]}return t}function p(t){return'\n        <svg viewBox="0 0 24 24" '+(t.elementId?"id="+t.elementId:"")+" "+(t.className?'class="'+t.className+'"':"")+">\n            "+(t.title?"<title>"+t.title+"</title>":"")+'\n            <use href="#'+t.iconId+'"></use>\n        </svg>\n    '}const y=Object.assign({repeat:!1,shuffle:!1,once:!1,mute:!1,volume:.4},JSON.parse(localStorage.getItem("settings"))||{});function v(t,e){y[t]=e,h(y)}function g(t){return y[t]}function b(t){delete y[t],h(y)}function h(t){localStorage.setItem("settings",JSON.stringify(t))}n(30),n(113),n(79),n(48);let w=[];function k(t){return w.some(e=>e===t)}function E(){const t=window.location.hash.slice(2).replace(/\/+$/g,"");let e=!1,n="home";d("route-change",{tabId:n=t&&!k(t)?"not-found":(e=t.startsWith("playlist/"))?t.split("playlist/")[1]:n,isPlaylistTab:e})}window.addEventListener("hashchange",E);const L={},I={};let j="",T=null,x=-1,B=[];function A(t){return L[t]}function S(t){return I[t.id]={sortOrder:[]},L[t.id]=Object.assign({sortedBy:"index",order:1,tracks:[]},t),L[t.id]}function O(t,e){Object.assign(L[t],e)}function M(t){return I[t]}function C(t,e){Object.assign(I[t],e)}function R(t){return t.reduce((t,e)=>t+=e.durationInSeconds,0)}function H(t){void 0===t&&(t=""),j=t}function P(){return j}function _(t){return t===j}function V(t){return t?Object.assign({},t):null}function U(t){T=t}function q(){return T}function D(t){const e=q();if(e&&_(t)){const i=N(t,e.name),o=i?i.index:-1;n={index:o},Object.assign(T,n),W(o,t)}var n}function N(t,e){const n=L[t];return n?n.tracks.find(t=>t.name===e):null}function W(t,e){const{sortOrder:n}=I[e],i=n.indexOf(t);x=(x=B.indexOf(i))<0?0:x}function z(t,e){const n=q(),{tracks:i}=L[t];I[t].shuffled=e,B=function(t,e){const n=t.map(t=>{let{index:e}=t;return e});return e?f(n):n}(i,e),n&&W(n.index,t)}function Y(t,e){const n=function(t){let e=x;return e+=t,!t||e>=B.length?e=0:-1===e&&(e=B.length-1),B[e]}(e),{tracks:i}=L[t],{sortOrder:o}=I[t];return V(i[o[n]])}function K(t){t.tracks=t.tracks.map((t,e)=>(t.index=e,t))}function X(t,e){return"index"===t?e.index:"duration"===t?e.durationInSeconds:e[t].toLowerCase()}function F(t){var e,n,i;I[t.id].sortOrder=(e=t.tracks,n=t.sortedBy,i=t.order,[...e].sort((t,e)=>{const o=X(n,t),s=X(n,e);return o<s?-i:o>s?i:0}).map(t=>{let{index:e}=t;return e}))}n(80);let J=null;function Z(){window.removeEventListener("click",Q,!0),o(J.element),J=null}function $(t,e,n){void 0===n&&(n={}),e(t,n),J={id:t,element:document.getElementById(t),removeOnClick:n.removeOnClick,initiator:n.element},window.addEventListener("click",Q,!0)}function G(t,e,n){if(J){const i=J.id;Z(),i!==t&&$(t,e,n)}else $(t,e,n)}function Q(t){let{target:e}=t;if(J.removeOnClick)return void Z();const{element:n,initiator:i}=J,o=a(e,n),s=!!i&&a(e,i);o&&s&&Z()}function tt(t){return document.getElementById("js-sidebar-entry-"+t)}function et(){const t=document.getElementById("js-active-playlist-icon");t&&o(t)}function nt(t,e){let{element:n}=e;n.insertAdjacentHTML("afterend",'\n        <form id="'+t+'" class="panel sidebar-form">\n            <h3 class="panel-title">Create Playlist</h3>\n            <div class="sidebar-form-input-container">\n                <input type="text" name="title" class="input sidebar-form-input"\n                    autocomplete="off" placeholder="Title" required>\n                <button class="btn">Create</button>\n            </div>\n        </form>\n    ');const i=document.getElementById(t);i.elements.title.focus(),i.addEventListener("submit",it)}function it(t){Gi(t),Z()}document.getElementById("js-sidebar-container").addEventListener("click",t=>{let{currentTarget:e,target:n}=t;if(r("data-link",n,e)||a(n,e.firstElementChild))return void e.classList.add("hidden");const i=r("data-btn",n,e);i&&G("js-sidebar-form-panel",nt,{element:i.elementRef})}),window.addEventListener("connectivity-status",t=>{let{detail:e}=t;document.getElementById("js-online-status").classList.toggle("visible",!e)});const ot=document.getElementById("js-google-sign-in");let st=null,rt=!1,at=!1,lt=!1;async function ct(t){if(!t.disabled){t.disabled=!0;try{if(!at)return void await dt(!0);const e=gapi.auth2.getAuthInstance();e.isSignedIn.get()?(await e.signOut(),rt=!1,st=null,document.getElementById("js-google-panel-toggle-btn").remove(),ot.insertAdjacentHTML("beforeend",'\n        <button id="js-google-sign-in-btn" class="btn btn-text"\n            data-item="google-sign-in">Sign In</button>\n    '),Z(),d("google-sign-out")):(await e.signIn(),ut(t,e.currentUser.get()))}catch(e){t.disabled=!1,console.log(e)}}}async function dt(t){if(void 0===t&&(t=!1),at||lt)return rt;const e=document.getElementById("js-google-sign-in-btn");lt=!0,e.disabled=!0;try{await i.load({src:"https://apis.google.com/js/api.js"}),await new Promise(t=>gapi.load("client:auth2",t)),await gapi.client.init({apiKey:"AIzaSyD33Rxm4dA34Mh84oSxYTUUF_jyCLLOua4",clientId:"293076144560-r5cear7rprgo094u6ibcd6nl3bbg18te.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],scope:"https://www.googleapis.com/auth/youtube.force-ssl"});const n=gapi.auth2.getAuthInstance();return n.isSignedIn.get()?ut(e,n.currentUser.get()):t&&(await n.signIn(),ut(e,n.currentUser.get())),at=!0,rt}catch(t){console.log(t)}finally{lt=!1,e.disabled=!1}}function ut(t,e){rt=!0,function(t){const e=t.getBasicProfile();st={name:e.getName(),email:e.getEmail(),image:e.getImageUrl()}}(e),t.remove(),ot.insertAdjacentHTML("afterbegin",'\n        <button id="js-google-panel-toggle-btn" class="btn btn-icon google-panel-toggle-btn">\n            <img src="'+st.image+'" class="google-user-image" alt="">\n        </button>\n    '),document.getElementById("js-google-panel-toggle-btn").addEventListener("click",ft)}function mt(t,e){let{element:n}=e;n.insertAdjacentHTML("afterend","\n        <div id="+t+' class="panel google-panel">\n            <div class="google-user">\n                <img src="'+st.image+'" class="google-user-image" alt="">\n                <div class="google-user-details">\n                    <div class="google-user-name">'+st.name+"</div>\n                    <div>"+st.email+'</div>\n                </div>\n            </div>\n            <button class="btn btn-text google-sign-out-btn"\n                data-item="google-sign-in">Sign Out</button>\n        </div>\n    ')}function ft(t){let{currentTarget:e}=t;G("js-google-panel",mt,{element:e})}n(114),n(116);function pt(){return document.getElementById("js-player-messages")||function(){const t=document.createElement("div");return t.id="js-player-messages",t.classList.add("player-messages"),document.getElementById("js-player").appendChild(t),t}()}function yt(){const t=pt();o(t.lastElementChild),t.childElementCount||o(t)}function vt(t){let{title:e,body:n}=t;pt().insertAdjacentHTML("afterBegin",'\n        <div class="player-message">\n            <h3 class="player-message-title">'+e+'</h3>\n            <p class="player-message-body">'+n+"</p>\n        </div>\n    "),setTimeout(yt,6e3)}function gt(){location.reload()}function bt(){d("connectivity-status",navigator.onLine)}window.addEventListener("sw-state-change",t=>{let{detail:e}=t;"update"===e&&(pt().insertAdjacentHTML("afterBegin",'\n        <div class="player-message service-worker-message">\n            <p class="player-message-body">Update is available, please refresh.</p>\n            <button id="js-player-message-btn" class="btn btn-icon player-message-btn">Refresh</button>\n        </div>\n    '),document.getElementById("js-player-message-btn").addEventListener("click",gt),setTimeout(yt,6e3))}),window.addEventListener("online",bt),window.addEventListener("offline",bt),window.addEventListener("load",bt);let ht=null;function wt(t){vt({title:"YouTube",body:t})}function kt(t){if(t.includes("H")||(t="0H"+t),!t.includes("M")){const e=t.indexOf("H")+1;t=t.slice(0,e)+"0M"+t.slice(e)}return t.includes("S")||(t+="0"),t.match(/\d{1,}/g).reverse().reduce((t,e,n)=>t+=e*60**n,0)}function Et(t,e,n,i,o){const s=function(){const t=gapi.auth2.getAuthInstance();return t.isSignedIn.get()?t.currentUser.get().getAuthResponse().access_token:null}();let r="part="+e+"&"+n+"="+i+"&maxResults=50&key=AIzaSyD33Rxm4dA34Mh84oSxYTUUF_jyCLLOua4";return o&&(r+="&pageToken="+o),s&&(r+="&access_token="+s),fetch("https://www.googleapis.com/youtube/v3/"+t+"?"+r).then(t=>t.json())}function Lt(t,e){return t.reduce((t,n)=>{return e.some(t=>t.id===n.id)||t.push(n),t},[])}function It(t){return t.filter(t=>{const e=t.snippet.title;return"Deleted video"!==e&&"Private video"!==e})}function jt(t){return t.map(t=>({id:t.snippet.resourceId.videoId,durationInSeconds:t.durationInSeconds,duration:c(t.durationInSeconds),name:t.snippet.title,title:t.snippet.title,artist:"",album:"",picture:t.snippet.thumbnails.medium.url,player:"youtube"}))}async function Tt(t,e){const{error:n,items:i,nextPageToken:o}=await Et("playlistItems","snippet","playlistId",t,e);n&&function(t){let{code:e,message:n}=t;throw 403===e?n="You need to be sign in if you want to import private playlists":404===e&&(n="Playlist was not found"),wt(n),new Error(n)}(n);const s=jt(await async function(t){const e=t.map(t=>t.snippet.resourceId.videoId).join(),n=await Et("videos","contentDetails","id",e);return t.reduce((t,e)=>{const i=n.items.find(t=>{let{id:n}=t;return n===e.snippet.resourceId.videoId});return i&&(e.durationInSeconds=kt(i.contentDetails.duration)-1,t.push(e)),t},[])}(It(i)));if(o){const e=await Tt(t,o);return s.concat(e)}return s}async function xt(t){const{items:e}=await Et("playlists","snippet,status","id",t),n="private"===e[0].status.privacyStatus,i={title:e[0].snippet.title,isPrivate:n};return n&&(i.user=st),i}function Bt(t,e){return A(t)||S(Object.assign({id:t,type:"grid",storePlaylist:!0},e))}async function At(t,e){const n=Bt(t,{title:"YouTube"}),{items:i}=await Et("videos","snippet,contentDetails","id",e);if(i.length){$i(n,Lt(jt(It(i).map(t=>(t.snippet.resourceId={videoId:t.id},t.durationInSeconds=kt(t.contentDetails.duration)-1,t))),n.tracks))}else wt("Video was not found")}async function St(t,e,n){const i=Bt(e,{url:t}),o=await Tt(e);"sync"===n&&function(t){let{id:e,_id:n,tracks:i}=t;const{rendered:o}=M(e),s=Mi(e);o&&s&&(s.innerHTML="");to({action:"remove-tracks",playlist:{_id:n,tracks:i}}),i.length=0}(i),i.title||O(i.id,await xt(e)),$i(i,Lt(o,i.tracks))}async function Ot(t,e){const{videoId:n,playlistId:i}=function(t){let e="",n="";try{const{searchParams:i}=new URL(t);e=i.get("v"),n=i.get("list")}catch(i){const o=t.match(/v=[a-zA-Z0-9\-_]+/),s=t.match(/list=[a-zA-Z0-9\-_]+/);o&&(e=o[0].slice(2)),s&&(n=s[0].slice(5))}return{videoId:e,playlistId:n}}(t),o=i||"youtube";if(n||i)if("WL"!==i){d("import",{importing:!0,option:"youtube",playlistId:o});try{n?await At(o,n):await St(t,o,e)}catch(t){console.log(t)}finally{d("import",{importing:!1,option:"youtube",playlistId:o})}}else wt("Importing <b>Watch Later</b> playlist is not allowed");else wt("Invalid url")}window.addEventListener("google-sign-out",()=>{ht=null});let Mt=null;function Ct(){const t="js-pl-entries";return document.getElementById(t)||function(t){document.getElementById("js-tab-home").insertAdjacentHTML("beforeend",'\n        <div class="home-tab-section pl-entry-container">\n            <div class="home-tab-section-header">\n                <h2 class="home-tab-section-title">Playlists</h2>\n            </div>\n            <ul id="'+t+'"></ul>\n        </div>\n    ');const e=document.getElementById(t);return e.addEventListener("click",Ft),e.addEventListener("focus",Jt,!0),e}(t)}function Rt(t){let{action:e,title:n,iconId:i}=t;return'\n        <button class="btn btn-icon pl-entry-btn" data-action="'+e+'" title="'+n+'">\n            '+p({iconId:i})+"\n        </button>\n    "}function Ht(t){let e=Math.floor(t/3600),n=Math.ceil(t/60%60);return 60===n&&(n=0,e+=1),e+" hr "+n+" min"}function Pt(t){const e=function(t){const e="assets/images/album-art-placeholder.png",n=[];if(!t.length)return[e];const i=f(t.map(t=>t.picture));for(const t of i){if(4===n.length)break;t!==e&&n.push(t)}if(!n.length)return[e];return n}(t);return'\n        <div class="pl-entry-thumbnail _'+e.length+'">\n            '+e.map(t=>'\n                <div class="pl-entry-thumb-image-container">\n                    <img src="'+u(t)+'" class="pl-entry-thumb-image" alt="">\n                </div>\n            ').join("")+"\n        </div>\n    "}function _t(t,e){const n=R(e);t.querySelector(".track-count").textContent=e.length+" tracks",t.querySelector(".playlist-duration").textContent=Ht(n)}function Vt(t,e){o(t.querySelector(".pl-entry-thumbnail")),t.insertAdjacentHTML("afterbegin",Pt(e))}function Ut(t,e){const{children:n}=document.getElementById("js-pl-entries");for(const i of n)if(t===i.getAttribute("data-entry-id")){_t(i,e),Vt(i,e);break}}function qt(t,e){let{element:n,pl:i}=e;n.insertAdjacentHTML("afterend",'\n        <div id="'+t+'" class="panel pl-entry-panel">\n            <h3 class="panel-title">Playlist settings</h3>\n            <label class="pl-entry-setting">\n                <input type="checkbox" class="checkbox-input" '+(i.syncOnInit?"checked":"")+'>\n                <div class="checkbox">\n                    <div class="checkbox-tick"></div>\n                </div>\n                <span>Synchronize playlist on startup</span>\n            </label>\n        </div>\n    '),document.getElementById(t).addEventListener("change",Zt)}function Dt(t){const{parentElement:e}=t;var n;o(t),e.children.length||((n=e).removeEventListener("click",Ft),n.removeEventListener("focus",Jt,!0),o(n.parentElement))}async function Nt(t){t.length&&(t.forEach(t=>{let{id:e}=t;d("import",{importing:!0,option:"youtube",playlistId:e})}),await dt(),t.forEach(t=>{let{url:e}=t;Ot(e,"sync")}))}function Wt(t){let{currentTarget:e}=t;const{attrValue:n}=r("data-entry-id",e),i=A(n),o=e.value;var s;(e.removeEventListener("blur",Wt),e.removeEventListener("keyup",zt),o)?o!==i.title&&(i.title=o,s=o,tt(n).querySelector(".sidebar-link").textContent=s,to({action:"change-title",playlist:{_id:i._id,title:o}})):e.value=i.title}function zt(t){let{currentTarget:e,which:n}=t;13===n&&e.blur()}function Yt(t){document.getElementById("js-player").insertAdjacentHTML("beforeend",'\n        <div id="'+t+'" class="modal">\n            <div class="panel">\n                <div class="panel-title-container">\n                    '+p({iconId:"trash",className:"panel-icon"})+'\n                    <h3 class="panel-title">Remove playlist?</h3>\n                </div>\n                <p>Are you sure you want to remove this playlist?<br>If you remove this playlist all your tracks will be lost.</p>\n                <div class="panel-button-container">\n                    <button class="btn btn-danger" data-type="remove">Remove</button>\n                    <button class="btn btn-text" data-type="cancel">Cancel</button>\n                </div>\n            </div>\n        </div>\n    '),document.getElementById(t).addEventListener("click",Xt)}function Kt(t){document.getElementById("js-player").insertAdjacentHTML("beforeend",'\n        <div id="'+t+'" class="modal">\n            <div class="panel">\n                <div class="panel-title-container">\n                    '+p({iconId:"sync",className:"panel-icon"})+'\n                    <h3 class="panel-title">Syncronize playlist?</h3>\n                </div>\n                <p>Are you sure you want to synchronize this playlist with the playlist on YouTube? If you choose to synchronize you will lose all previously imported tracks.</p>\n                <div class="panel-button-container">\n                    <button class="btn btn-danger" data-type="sync">Synchronize</button>\n                    <button class="btn btn-text" data-type="cancel">Cancel</button>\n                </div>\n            </div>\n        </div>\n    '),document.getElementById(t).addEventListener("click",Xt)}function Xt(t){let{target:e,currentTarget:n}=t;if(e===n)return Z(),void(Mt=null);const i=r("data-type",e);i&&("remove"===i.attrValue?(Zi(Mt.playlist),Dt(Mt.entryElement)):"sync"===i.attrValue&&Nt([Mt.playlist]),Z(),Mt=null)}function Ft(t){let{target:e}=t;const n=r("data-entry-id",e),i=r("data-action",e);if(!n||!i||i.elementRef.disabled)return;const{attrValue:o,elementRef:s}=i,a=A(n.attrValue);"remove"===o?a.tracks.length?(Mt={playlist:a,entryElement:n.elementRef},G("js-pl-remove-panel",Yt)):(Zi(a),Dt(n.elementRef)):"sync"===o?(Mt={playlist:a},G("js-pl-sync-panel",Kt)):"settings"===o?G("js-pl-entry-panel",qt,{element:s,pl:a}):"edit"===o&&s.querySelector(".input").focus()}function Jt(t){let{target:e}=t;const n=r("data-action",e);n&&"edit"===n.attrValue&&(e.addEventListener("blur",Wt),e.addEventListener("keyup",zt))}function Zt(t){let{target:e}=t;const{attrValue:n}=r("data-entry-id",e),i=A(n);i.syncOnInit=e.checked,to({action:"change-sync",playlist:{_id:i._id,syncOnInit:i.syncOnInit}})}function $t(t){let{currentTarget:e,target:n}=t;const i=r("data-panel-item",n,e);if(!i)return;const{attrValue:s,elementRef:a}=i;"btn"===s?(!function(t,e,n,i){e.insertAdjacentHTML(n,'\n        <form id="js-'+t+'-form" class="'+t+'-form">\n            <input type="text" name="title" class="input" autocomplete="off" placeholder="Title" required>\n            <button class="btn">Create</button>\n        </form>\n    ');const o=document.getElementById("js-"+t+"-form");o.elements.title.focus(),o.addEventListener("submit",i)}("move-to",a.parentElement,"beforeend",Gt),o(a)):(e.removeEventListener("click",$t),function(t){const e=Be(xe()),{tracks:n}=Ii(),i=A(t),o=n.filter(n=>e.includes(n.index)&&!N(t,n.name));$i(i,o),s="playlist/"+i.id,window.location.hash="/"+s;var s}(s),Z(),pe())}function Gt(t){const e=document.getElementById("js-move-to-list"),n=Li();Gi(t),e?e.innerHTML=Qt(n):t.target.insertAdjacentHTML("beforebegin",te(n))}function Qt(t){return Object.keys(L).map(A).reduce((e,n)=>(n.id!==t&&(e+='\n                <li data-panel-item="'+n.id+'">\n                    <button class="btn btn-icon move-to-list-item-btn">'+n.title+"</button>\n                </li>\n            "),e),"")}function te(t){const e=Qt(t);return e?'<ul id="js-move-to-list" class="move-to-list">'+e+"</ul>":""}function ee(t,e){let{playlistId:n}=e;document.getElementById("js-move-to-panel-container").insertAdjacentHTML("beforeend",'\n        <div id="'+t+'" class="panel move-to-panel">\n            <h3 class="panel-title move-to-panel-title">Move to</h3>\n            '+te(n)+'\n            <button class="btn btn-icon move-to-new-pl-btn" data-panel-item="btn">\n                '+p({iconId:"plus"})+"\n                <span>Create new playlist</span>\n            </button>\n        </div>\n    ")}const ne={},ie={};let oe=null,se=null,re=null,ae={},le=[],ce=0,de=!1,ue=!1;function me(){oe.removeEventListener("mousedown",je),oe=null}function fe(){xe().forEach(t=>{t.classList.remove("selected")})}function pe(){fe(),ve()}function ye(){ue||(ue=!0,function(){const t="js-move-to-panel-container";document.getElementById("js-playlist-tab-header-items").insertAdjacentHTML("afterbegin",'\n        <div id="'+t+'" class="playlist-tab-header-item" data-move-to>\n            <button class="btn btn-icon" data-item="move-to" title="Move to">\n                '+p({iconId:"move-to"})+"\n            </button>\n        </div>\n    "),document.getElementById(t).addEventListener("click",$t)}(),setTimeout(()=>{window.addEventListener("click",Ie,!0)},0),window.addEventListener("keydown",Te))}function ve(){ue&&(ue=!1,function(){const t=document.getElementById("js-move-to-panel-container");t.removeEventListener("click",$t),o(t)}(),window.removeEventListener("click",Ie,!0),window.removeEventListener("keydown",Te))}function ge(t,e){return t>e?e:t<0?0:t}function be(){clearInterval(ce),ce=0}function he(t){de=!0,requestAnimationFrame(()=>{re&&function(t,e,n,i){let o=t.x-e.x,s=t.y-e.y;if(o<0){const t=e.x+o;o*=-1,n.left=t,i.left=t+"px"}else n.left!==e.x&&(n.left=e.x,i.left=e.x+"px");if(s<0){const t=e.y+s;s*=-1,n.top=t,i.top=t+"px"}else n.top!==e.y&&(n.top=e.y,i.top=e.y+"px");n.right=n.left+o,n.bottom=n.top+s,i.width=o+"px",i.height=s+"px"}(ie,ne,ae,re.style),function(t,e,n){for(let i=0;i<t.length;i++){const o=t[i],s=o.ref.classList;e.right>o.left&&e.left<o.right&&e.bottom>o.top&&e.top<o.bottom?(n&&!o.selected&&s.contains("selected")&&(s.remove("selected"),o.removed=!0),o.removed||(s.add("selected"),o.selected=!0)):o.selected?(s.remove("selected"),o.selected=!1):o.removed&&(s.add("selected"),o.removed=!1)}}(le,ae,t),de=!1})}function we(t,e,n){let{scrollHeight:i,height:o}=n;e.scrollTop+=36,ie.y=e.scrollTop+o,ie.y>=i&&(ie.y=i,be()),de||he(t)}function ke(t,e){e.scrollTop-=36,ie.y=e.scrollTop,ie.y<=0&&(ie.y=0,be()),de||he(t)}function Ee(t){const{top:e,left:n,width:i,height:o,scrollHeight:s}=se,r=t.clientY-e;if(ie.x=ge(t.clientX-n,i),ie.y=ge(oe.scrollTop+r,s),t.preventDefault(),!re&&function(t,e){return t.x>e.x+2||t.x<e.x-2||t.y>e.y+2||t.y<e.y-2}(ie,ne))return le=function(){const{children:t}=Mi(Li());return Array.from(t).map(t=>{const e=t.offsetTop,n=t.offsetLeft;return{ref:t,top:e,left:n,right:n+t.offsetWidth,bottom:e+t.offsetHeight}})}(),re=function(t,e){let{x:n,y:i}=e;return ae.top=i,ae.left=n,t.insertAdjacentHTML("afterbegin",'\n        <div class="selection-area" style="top: '+i+"px; left: "+n+'px"></div>\n    '),t.firstElementChild}(oe,ne),document.activeElement.blur(),t.ctrlKey||fe(),void ve();if(de||he(t.ctrlKey),ce&&r>0&&r<o)be();else if(!ce){let e=null;if(r>o&&ie.y<s)e=we;else{if(!(r<0&&ie.y>0))return;e=ke}ce=setInterval(e,40,t.ctrlKey,oe,se)}}function Le(t){let{target:e,ctrlKey:n}=t;if(ce&&be(),re){const t=xe();o(re),re=null,ae={},le.length=0,t.length?ye():ve()}else{const t=r("data-index",e,oe);t?function(t,e){if(e||fe(),t.classList.toggle("selected"),t.classList.contains("selected"))ye();else{const e=xe();t.blur(),e.length||ve()}}(t.elementRef,n):n||pe()}window.removeEventListener("mousemove",Ee),window.removeEventListener("mouseup",Le)}function Ie(t){let{target:e}=t;!r("data-move-to",e)&&a(e,oe)&&pe()}function je(t){let{currentTarget:e,target:n,which:i,clientX:o,clientY:s}=t;var a;1===i&&(r("data-btn",n)?pe():(se={top:(a=e).offsetTop,left:a.offsetLeft,width:a.clientWidth,height:a.offsetHeight,scrollHeight:a.scrollHeight},ne.x=o-se.left,ne.y=e.scrollTop+s-se.top,ne.x<se.width&&(window.addEventListener("mousemove",Ee),window.addEventListener("mouseup",Le))))}function Te(t){let{key:e,keyCode:n}=t;"Delete"!==e&&127!==n||(!function(){const t=xe(),e=Ii(),n=Be(t),{tracksToKeep:i,tracksToRemove:s}=function(t,e){const n=[],i=[];return t.forEach(t=>{e.includes(t.index)?i.push(t):n.push(t)}),{tracksToRemove:i,tracksToKeep:n}}(e.tracks,n);e.tracks=i,function(t){t.forEach(o)}(t),K(e),F(e),function(t){const{sortOrder:e}=M(t);[...Mi(t).children].forEach((t,n)=>{const i=t.querySelector(".list-item-index");i&&(i.textContent=n+1),t.setAttribute("data-index",e[n])})}(e.id),z(e.id,g("shuffle")),D(e.id),Ut(e.id,i),i.length||(me(),Di(e));to({action:"remove-tracks",playlist:{_id:e._id,tracks:s}})}(),ve())}function xe(){return Array.from(oe.querySelectorAll(".track.selected"))}function Be(t){return t.map(t=>parseInt(t.getAttribute("data-index"),10))}n(117);const Ae=document.getElementById("js-filter-input"),Se=Ae.parentElement;let Oe=0,Me="";function Ce(t,e,n,i){const o=new RegExp(i,"i"),{sortOrder:s}=M(t);e.forEach(t=>{const e=n[s.indexOf(t.index)],i=t.title+"\n"+t.artist+"\n"+t.album;e.classList.toggle("hidden",!o.test(i))})}function Re(t,e){void 0===e&&(e="");const{tracks:n}=A(t);if(!n.length)return;const{children:i}=Mi(t);var o;Me=e?t:"",Ce(t,n,i,e),o=e,document.getElementById("js-clear-input-btn").classList.toggle("visible",o)}function He(){Me&&(Ae.value="",Re(Me))}function Pe(){Se.classList.remove("active"),Ae.removeEventListener("keyup",_e),Ae.removeEventListener("blur",Pe)}function _e(t){let{target:e}=t;const n=Li();clearTimeout(Oe),Oe=setTimeout(Re,400,n,e.value)}function Ve(t){document.getElementById("js-order-toggle").querySelector("use").setAttribute("href","#"+(1===t?"down":"up")+"-arrow")}function Ue(t,e){const{value:n}=document.getElementById("js-filter-input");if(t.order=t.sortedBy===e&&1===t.order?-1:1,t.sortedBy=e,F(t),to({action:"change-sorting",playlist:{order:t.order,_id:t._id,sortedBy:e}}),D(t.id),Di(t),n){const{children:e}=Mi(t.id);Ce(t.id,t.tracks,e,n)}}function qe(t){let{sortedBy:e,order:n}=t;var i;i=e,document.getElementById("js-sort-toggle").textContent=i,Ve(n)}function De(t,e){let{sortedBy:n}=e;document.getElementById("js-sort-panel-container").insertAdjacentHTML("beforeend",function(t,e){return'<ul id="'+t+'" class="panel sort-panel">'+function(t){return["index","title","artist","album","duration"].reduce((e,n)=>{return"\n            "+e+'\n            <li>\n                <button class="btn btn-icon sort-option-btn'+(n===t?" active":"")+'" data-sort="'+n+'">\n                    '+n+"\n                </button>\n            </li>\n        "},"")}(e)+"</ul>"}(t,n)),document.getElementById(t).addEventListener("click",Ne)}function Ne(t){let{currentTarget:e,target:n}=t;const i=n.getAttribute("data-sort"),o=Ii();e.removeEventListener("click",Ne),Z(),i!==o.sortedBy&&(qe({sortedBy:i,order:1}),Ue(o,i))}Ae.addEventListener("focus",t=>{let{currentTarget:e}=t;Se.classList.add("active"),e.addEventListener("keyup",_e),e.addEventListener("blur",Pe)}),Se.addEventListener("click",t=>{let{target:e}=t;const n=r("data-filter-item",e);if(!n)return;const i=n.attrValue;"icon"===i?Ae.focus():"button"===i&&(He(),Pe())});const We=document.getElementById("js-volume-slider"),ze=document.getElementById("js-track-slider"),Ye=document.getElementById("js-controls");let Ke=!1,Xe=null;const Fe=function(){let t=0;function e(){clearTimeout(t)}function n(e,i,o){const s=performance.now()-i-o;Ke||ln(e,e.currentTime),ii.updateTrack({currentTime:e.currentTime}),e.currentTime<=e.durationInSeconds?(e.currentTime+=1,o+=1e3,t=setTimeout(n,1e3-s,e,i,o)):d("track-end")}return{stop:e,start:function(t){const i=performance.now();e(),n(t,i,0)}}}();function Je(){const t=Ci();t&&(Xe=t,t.classList.add("show-spinner")),document.getElementById("js-play-btn").classList.add("show-spinner")}function Ze(){const t=Ci();Xe&&(Xe.classList.remove("show-spinner"),Xe=null),t&&t.classList.remove("show-spinner"),document.getElementById("js-play-btn").classList.remove("show-spinner")}function $e(t){return t?{id:"play",title:"Play"}:{id:"pause",title:"Pause"}}function Ge(t,e){m(t,$e(e))}function Qe(t,e){const n={on:{id:"volume-off",title:"Unmute"},off:{id:"volume",title:"Mute"}};m(t,e?n.on:n.off)}function tn(t,e){const{left:n,width:i}=document.getElementById("js-"+t+"-slider").getBoundingClientRect();let o=(e-n)/i*100;return o<0?o=0:o>100&&(o=100),o}function en(){Fe.stop(),ln()}function nn(t){v("volume",t),cn(t),function(t){const e=q()||{};"native"===e.player?qn(t):"youtube"===e.player&&ei(t)}(t)}function on(t,e){const n=e/2;return t+n+8>window.innerWidth||t-n-8<0}function sn(t,e){return"calc("+t+"% - "+e+"px)"}function rn(t,e){const n=document.getElementById("js-volume-slider-label");n.textContent=Math.floor(t)+"%";const i=n.offsetWidth;on(e,i)||(n.style.left=sn(t,i/2))}function an(t,e){document.getElementById("js-"+t+"-slider-thumb").style.left=100*e+"%",document.getElementById("js-"+t+"-slider-elapsed").style.transform="scaleX("+e+")"}function ln(t,e){void 0===e&&(e=0);let n=1,i="0:00";t&&(n=t.durationInSeconds,i=t.duration);const o=c(e,n>=3600);Ke||(document.getElementById("js-track-current").textContent=o),an("track",e/n),ze.setAttribute("aria-valuenow",e),ze.setAttribute("aria-valuetext",o+" of "+i)}function cn(t){const e=Math.floor(100*t);an("volume",t),We.setAttribute("aria-valuenow",e),We.setAttribute("aria-valuetext",e+"% volume")}function dn(t,e){void 0===t&&(t="0:00"),void 0===e&&(e=0),document.getElementById("js-track-duration").textContent=t,ze.setAttribute("aria-valuemax",e)}function un(t,e){const n=tn("track",t);return{percent:n,currentTime:Math.floor(e*n/100)}}function mn(t,e,n){const i=document.getElementById("js-track-slider-label");i.textContent=c(e);const o=i.offsetWidth;on(n,o)||(i.style.left=sn(t,o/2))}function fn(t){let{pageX:e}=t;const n=q(),{percent:i,currentTime:o}=un(e,n.durationInSeconds);ln(n,o),mn(i,o,e)}function pn(t){let{pageX:e}=t;const n=q();if(!n)return;const{percent:i,currentTime:o}=un(e,n.durationInSeconds);mn(i,o,e)}function yn(t){let{pageX:e}=t;const n=q();if(Ke=!1,n){const{currentTime:t}=un(e,n.durationInSeconds);ln(n,t),bi(n.player,t),ii.updateTrack({currentTime:t})}window.removeEventListener("pointermove",fn),window.removeEventListener("pointerup",yn),ze.addEventListener("pointermove",pn)}function vn(t){let{pageX:e}=t;const n=tn("volume",e),i=n/100;i!==g("volume")&&(rn(n,e),i?(kn(),nn(i)):hn({attrValue:"mute",elementRef:document.getElementById("js-volume-btn")}))}function gn(t){let{pageX:e}=t;rn(tn("volume",e),e)}function bn(){window.removeEventListener("pointermove",vn),window.removeEventListener("pointerup",bn),We.addEventListener("pointermove",gn)}function hn(t){let{attrValue:e,elementRef:n}=t;const i=!g(e);n.setAttribute("aria-checked",i),v(e,i),"mute"===e?(wn(i),Qe(n,i)):n.classList.toggle("active")}function wn(t){const e=t?0:g("volumeBeforeMute");t?v("volumeBeforeMute",g("volume")):b("volumeBeforeMute"),nn(e)}function kn(){const t=g("mute");if(t){const e=document.getElementById("js-volume-btn");b("volumeBeforeMute"),v("mute",!t),Qe(e,!t),e.classList.remove("active")}}function En(t){let e=g("volume");if(e<1&&"ArrowUp"===t)e||kn(),(e+=.05)>1&&(e=1);else if(e&&"ArrowDown"===t&&(e-=.05)<=0)return e=0,void hn({attrValue:"mute",elementRef:document.getElementById("js-volume-btn")});nn(e)}function Ln(t){const e=q();if(!e)return;const n=e.durationInSeconds;let{currentTime:i}=ii.getTrack();"ArrowRight"===t||"ArrowUp"===t?(i+=5)>n&&(i=n):"ArrowLeft"!==t&&"ArrowDown"!==t||(i-=5)<0&&(i=0),ln(e,i),bi(e.player,i),ii.updateTrack({currentTime:i})}function In(t){return function(e){let{pageX:n}=e;const i=document.getElementById("js-"+t+"-slider-label"),o=window.innerWidth,s=i.offsetWidth/2;if(n+s+8>o){const e=tn(t,o-s-8);i.style.left=sn(e,s)}else if(n-s-8<0){const e=tn(t,s+8);i.style.left=sn(e,s)}}}window.addEventListener("keydown",t=>{const e=t.ctrlKey||t.shiftKey||t.altKey||t.metaKey;if(t.target instanceof HTMLInputElement||e)return;const{key:n}=t;"p"===n?di():"m"===n?function(){const t=!g("mute"),e=document.getElementById("js-volume-btn");wn(t),Qe(e,t),v("mute",t)}():"["===n?mi():"o"===n?fi():n.startsWith("Arrow")&&"slider"!==t.target.role&&!function(t,e,n){for(void 0===n&&(n=null);e&&e!==n;){if(e.nodeName===t)return{elementRef:e};e=e.parentElement}}("UL",t.target)&&("ArrowUp"===n||"ArrowDown"===n?En(n):"ArrowRight"!==n&&"ArrowLeft"!==n||Ln(n))}),ze.addEventListener("pointerdown",t=>{1===t.which&&q()&&(Ke=!0,fn(t),ze.removeEventListener("pointermove",pn),window.addEventListener("pointermove",fn),window.addEventListener("pointerup",yn))}),ze.addEventListener("pointermove",pn),ze.addEventListener("pointerenter",In("track")),ze.addEventListener("keydown",t=>{let{key:e}=t;e.startsWith("Arrow")&&Ln(e)}),We.addEventListener("pointerdown",t=>{1===t.which&&(vn(t),We.removeEventListener("pointermove",gn),window.addEventListener("pointermove",vn),window.addEventListener("pointerup",bn))}),We.addEventListener("pointermove",gn),We.addEventListener("pointerenter",In("volume")),We.addEventListener("keydown",t=>{let{key:e}=t;e.startsWith("Arrow")&&En(e)}),document.getElementById("js-main-controls").addEventListener("click",t=>{let{target:e}=t;const n=r("data-item",e);if(n)switch(n.attrValue){case"previous":fi();break;case"play":di();break;case"next":mi()}}),Ye.addEventListener("click",t=>{let{target:e}=t;const n=r("data-item",e);n&&hn(n)}),Ye.addEventListener("keyup",t=>{let{which:e,target:n}=t;const i=r("data-item",n);!i||32!==e&&13!==e||hn(i)}),document.getElementById("js-control-toggle-btn").addEventListener("click",()=>{Ye.classList.toggle("visible")}),cn(g("volume")),Array.from(document.querySelectorAll(".control-btn")).forEach(t=>{const e=t.getAttribute("data-item"),n=g(e);n&&(t.setAttribute("aria-checked",!0),"mute"===e?Qe(t,n):t.classList.add("active"))});const jn=document.getElementById("js-now-playing"),Tn=document.getElementById("js-media-toggle-btn"),xn=document.getElementById("js-media-container");let Bn,An,Sn=null,On=!1;function Mn(t){let{target:e}=t;const n=r("data-item",e);n&&"image"===n.attrValue&&li(q())}function Cn(){const t=document.activeElement;t instanceof HTMLIFrameElement&&requestAnimationFrame(()=>{t.blur()})}function Rn(t){27===t.which&&(On=!1,xn.classList.remove("visible"),window.removeEventListener("keydown",Rn),m(Tn,{title:"Expand",id:"expand"}))}function Hn(){const t=document.getElementById("js-track-info");t&&o(t)}function Pn(t){void 0===t&&(t="./assets/images/album-art-placeholder.png"),document.getElementById("js-artwork").src=t}function _n(t,e){Pn(),Hn(),function(t,e){Pn(e),jn.classList.remove("inactive"),jn.insertAdjacentHTML("beforeend",function(t,e){let n=t.name,i=t.name;t.artist&&t.title&&(n=t.artist+" - "+t.title+(t.album?" - "+t.album:""),i='\n            <div class="track-title">'+t.title+'</div>\n            <div class="track-artist">'+t.artist+(t.album?" - "+t.album:"")+"</div>\n        ");return'<div id="'+e+'" class="track-info" title="'+n+'">'+i+"</div> "}(t,"js-track-info"))}(t,e)}function Vn(t){Sn&&URL.revokeObjectURL(Sn),_n(t,Sn=u(t.picture)),function(t,e){const n=document.getElementById("js-media-image");"native"===t?(n.classList.remove("hidden"),n.src=e):n.classList.add("hidden")}(t.player,Sn)}function Un(){document.title="Veery",Pn(),Hn(),jn.classList.add("inactive"),xn.classList.remove("visible"),Sn&&(URL.revokeObjectURL(Sn),Sn=null)}function qn(t){An.volume=t}function Dn(t){An.currentTime=t}Tn.addEventListener("click",(function(t){let{currentTarget:e}=t;const n=document.getElementById("js-yt-player");xn.classList.toggle("visible"),(On=!On)?(xn.addEventListener("click",Mn),window.addEventListener("keydown",Rn),window.addEventListener("blur",Cn),m(e,{title:"Collapse",id:"collapse"}),n.removeAttribute("tabindex")):(xn.removeEventListener("click",Mn),window.removeEventListener("keydown",Rn),window.removeEventListener("blur",Cn),m(e,{title:"Expand",id:"expand"}),n.setAttribute("tabindex","-1"))}));const Nn=1,Wn=2,zn=3;let Yn=!1,Kn=null,Xn=!1,Fn=null,Jn=!1;function Zn(t){let{data:e}=t;const n=q();n&&"youtube"===n.player&&(e===Nn?(Jn||si(!1),Jn=!1,d("track-start",Kn.getCurrentTime())):e===Wn?(Jn||si(!0),Jn=!1,Ze()):e===zn?(Fe.stop(),Je()):Ze())}function $n(){const{id:t,volume:e,startTime:n}=Fn;Yn=!0,"number"==typeof n?(ei(e),Kn.cueVideoById(t,n),Xn=!0):ti(t,e)}function Gn(t){let e="";if(100===t.data?e="Video is either removed or marked as private":101!==t.data&&150!==t.data||(e="The owner of the requested video does not allow it to be played in embedded players"),console.log(t),e){const t=P(),n=q(),{name:i}=Y(t,1);n.name===i?vi(n):mi(),vt({title:"Cannot play "+n.name,body:e})}}function Qn(){Kn=new YT.Player("js-yt-player",{playerVars:{autoplay:0,disablekb:1,controls:0,fs:0,iv_load_policy:3},events:{onReady:$n,onStateChange:Zn,onError:Gn}})}function ti(t,e,n){if(Yn)return ei(e),void Kn.loadVideoById(t,n);Fn={id:t,volume:e,startTime:n},window.onYouTubeIframeAPIReady=Qn,i.load({src:"https://www.youtube.com/iframe_api"})}function ei(t){Yn&&Kn.setVolume(100*t)}let ni=!0;const ii=function(){function t(){return JSON.parse(localStorage.getItem("track"))||{}}function e(t){localStorage.setItem("track",JSON.stringify(t))}function n(){localStorage.removeItem("track")}return{getTrack:t,removeTrack:n,saveTrack:e,updateTrack:function(n){e(Object.assign(t(),n))},initTrack:function(){const e=t();if(!e)return;const{playlistId:i,currentTime:o,name:s}=e,r=V(N(i,s));r?(ci(r,i,{startTime:o}),ln(r,o)):n()}}}();function oi(){return ni}function si(t){(ni="boolean"==typeof t?t:!ni)&&(et(),Fe.stop()),ai(ni),hi()}function ri(t,e,n){let{scrollToTrack:i,startTime:o}=n;const{rendered:s}=M(e);Vn(t),dn(t.duration,t.durationInSeconds),ze.classList.add("visible"),H(e),W(t.index,e),U(t),s&&-1!==t.index&&(Wi(t.index,e),i&&Yi(e)),void 0===o?(ni=!1,hi(),Je(),ai(ni)):ni=!0}function ai(t){Ge(document.getElementById("js-play-btn"),t),Ki(t)}function li(t){let{player:e}=t;"native"===e?ni?An.play():An.pause():"youtube"===e&&function(t){Yn&&(Jn=!0,Xn=!1,t?Kn.playVideo():Kn.pauseVideo())}(ni),si()}function ci(t,e,n){void 0===n&&(n={});const i=g("volume");ri(t,e,n),"native"===t.player?function(t,e,n){Bn=URL.createObjectURL(t.audioTrack),(An=new Audio(Bn)).onplaying=function(){d("track-start",An.currentTime)},An.onerror=function(t){const e=P(),n=q(),{name:i}=Y(e,1);n.name===i?vi(n):mi(),vt({title:"Cannot play "+n.name,body:"Its path or name might have changed"}),console.log(t)},qn(e),"number"!=typeof n?An.play():Dn(n)}(t,i,n.startTime):"youtube"===t.player&&ti(t.id,i,n.startTime)}function di(){const t=q();t?li(t):ui("direction",0,Li())}function ui(t,e,n){if(!n)return;const i=g("shuffle"),o=q(),{shuffled:s}=M(n);let r=!1;if(o&&(Ki(!0),zi(),en(),yi(o)),n===P()&&s===i||(r=!0,z(n,i)),"index"===t){const{tracks:t}=A(n);!r&&i&&z(n,i),ci(V(t[e]),n)}else if("direction"===t){const t=Y(n,e);t?ci(t,n,{scrollToTrack:!0}):gi(o)}}function mi(){ui("direction",1,P())}function fi(){ui("direction",-1,P())}function pi(t){let{currentTarget:e,detail:n,target:i}=t;const o=Li(),s=r("data-btn",i,e),a=r("data-index",i,e);if(2===n&&a&&!s)ui("index",a.attrValue,o);else if(s){const t=parseInt(a.attrValue,10),e=q();e&&e.playlistId===o&&t===e.index?li(e):ui("index",t,o)}}function yi(t){let{player:e}=t;"native"===e?(An.pause(),An.onplaying=null,An.onerror=null,An.currentTime=0,An=null,Bn&&(URL.revokeObjectURL(Bn),Bn=null)):"youtube"===e&&Yn&&(Ze(),Kn.stopVideo(),Xn=!1)}function vi(t){t&&yi(t),gi(t)}function gi(t){ni=!0,ii.removeTrack(),dn(),ze.classList.remove("visible"),Un(),U(),H(),et(),t&&(ai(ni),zi(),en(),Ze())}function bi(t,e){Fe.stop(),"native"===t?Dn(e):"youtube"===t&&function(t){Yn&&(Xn?Kn.cueVideoById(Fn.id,t):Kn.seekTo(t,!0))}(e)}function hi(t){void 0===t&&(t=Li());const e=oi(),n=A(t);let i="Veery";if(e)n&&(i=n.title+" | "+i);else{const{artist:t,name:e,title:n}=q();i=(t&&n?t+" - "+n:e)+" | "+i}document.title=i}window.addEventListener("track-start",t=>{let{detail:e}=t;const n=P(),{name:i,duration:o,durationInSeconds:s}=q();!function(t){const e=tt(t);et(),e.insertAdjacentHTML("beforeend",p({iconId:"volume",elementId:"js-active-playlist-icon",className:"active-playlist-icon"}))}(n),ii.saveTrack({name:i,playlistId:n}),Fe.start({currentTime:Math.floor(e),duration:o,durationInSeconds:s}),Ze()}),window.addEventListener("track-end",()=>{const t=q();g("once")?vi(t):(ii.removeTrack(),g("repeat")?ci(t,P()):mi())});const wi=document.getElementById("js-tab-header"),ki=matchMedia("(max-width: 540px)");let Ei="";function Li(){return Ei}function Ii(){return A(Ei)}function ji(t){return document.getElementById("js-tab-"+t)}function Ti(t){const e=A(t),{rendered:n}=M(t);n?function(t){if(P()!==t)return;Oi&&Yi(t)}(t):function(t){const e=function(t){const e=Ui(t);return'<div id="js-tab-'+t.id+'" class="tab">'+e+"</div>"}(t);document.getElementById("js-tabs").insertAdjacentHTML("beforeend",e),C(t.id,{rendered:!0}),t.tracks.length&&(qi(t.id),Ai(t.id))}(e),"list"===e.type&&ki.matches?Fi(e,"grid"):Xi(e.type),qe(e),function(t){let{id:e,tracks:n}=t;oe&&me(),n.length&&(oe=ji(e)).addEventListener("mousedown",je)}(e),He(),e.tracks.length&&ji(t).addEventListener("click",pi)}wi.addEventListener("click",t=>{let{currentTarget:e,target:n}=t;const i=r("data-item",n,e);if(!i)return;const o=Ii(),s=i.attrValue;"move-to"===s?G("js-move-to-panel",ee,{playlistId:o.id,element:i.elementRef}):"list"!==s&&"grid"!==s||s===o.type?"sorting"===s?G("js-sort-panel",De,{sortedBy:o.sortedBy,element:i.elementRef}):"order"===s&&o.sortedBy?function(t){Ue(t,t.sortedBy),Ve(t.order)}(o):"sidebar"===s&&document.getElementById("js-sidebar-container").classList.remove("hidden"):Fi(o,s)}),window.addEventListener("route-change",t=>{let{detail:{isPlaylistTab:e,tabId:n}}=t;const i=ji(Ei);s(".sidebar-entry.active","active"),s(".tab.active","active"),function(t){void 0===t&&(t=""),Ei=t}(e?n:""),i&&i.removeEventListener("click",pi),e?(Ti(n),wi.classList.add("playlist-tab-active")):wi.classList.remove("playlist-tab-active"),hi(n),ji(n).classList.add("active"),"not-found"!==n&&tt(n).classList.add("active")}),ki.onchange=function(t){let{matches:e}=t;const n=Ii();e&&n&&"list"===n.type&&Fi(n,"grid")};const xi={};function Bi(t){t.forEach(t=>{let{isIntersecting:e,target:n}=t;e?function(t){const{id:e,tracks:n,type:i}=Ii(),o=n[t.getAttribute("data-index")];t.innerHTML=Hi(o,e,i)}(n):n.childElementCount&&function(t){const e=t.querySelector(".artwork");e&&URL.revokeObjectURL(e.src),t.innerHTML=""}(n)})}function Ai(t){if(!IntersectionObserver||xi[t])return;xi[t]=new IntersectionObserver(Bi,{root:ji(t)});const{children:e}=Mi(t);!function(t,e){e.forEach(e=>{xi[t].observe(e)})}(t,Array.from(e))}function Si(t){xi[t]&&(xi[t].disconnect(),delete xi[t])}let Oi=null;function Mi(t){return document.getElementById("js-"+t)}function Ci(){if(Oi)return Oi.querySelector(".btn-icon")}function Ri(t){if(Li()!==P())return $e(!0);const e=q(),n=oi();return e&&e.index===t?$e(n):$e(!0)}function Hi(t,e,n){return"list"===n?function(t,e){const{sortOrder:n}=M(e),i=n.indexOf(t.index),{title:o,id:s}=Ri(t.index);return'\n        <span class="list-item-first-col">\n            <span class="list-item-index">'+(i+1)+'</span>\n            <button class="btn btn-icon track-play-pause-btn" data-btn="play" title="'+o+'">\n                '+p({iconId:s})+'\n            </button>\n        </span>\n        <span class="list-item-col">'+t.title+'</span>\n        <span class="list-item-col">'+t.artist+'</span>\n        <span class="list-item-col">'+t.album+'</span>\n        <span class="list-item-last-col">'+t.duration+"</span>\n    "}(t,e):function(t){const{title:e,id:n}=Ri(t.index);return'\n        <div class="artwork-container grid-item-thumbnail" tabindex="-1">\n            <button class="btn btn-icon track-play-pause-btn artwork-container-btn" data-btn="play" title="'+e+'">\n                '+p({iconId:n})+'\n            </button>\n            <img src="'+u(t.picture)+'" class="artwork" alt="">\n        </div>\n        '+function(t){let e=t.name;t.artist&&t.title&&(e='\n            <div class="track-title">'+t.title+"</div>\n            <div>"+t.artist+" "+(t.album?"- "+t.album:"")+"</div>\n        ");return'<div class="track-info">'+e+"</div> "}(t)+'\n        <div class="grid-item-duration">'+t.duration+"</div>\n    "}(t)}function Pi(t){let{index:e}=t;return'<li class="list-item track" data-index="'+e+'" tabindex="0"></li>'}function _i(t){let{index:e}=t;return'<li class="grid-item track" data-index="'+e+'" tabindex="0"></li>'}function Vi(t,e,n){return e.reduce((e,i)=>e+n(t[i]),"")}function Ui(t){return t.tracks.length?function(t){let{id:e,type:n,tracks:i}=t;const{sortOrder:o}=M(e);return"list"===n?function(t,e){return'\n        <ul class="list-view-header">\n            <li class="list-item-first-col">#</li>\n            <li>Title</li>\n            <li>Artist</li>\n            <li>Album</li>\n            <li class="list-item-last-col">Duration</li>\n        </ul>\n        <ul id="js-'+t+'" class="playlist-view">'+e+"</ul>\n    "}(e,Vi(i,o,Pi)):function(t,e){return'<ul id="js-'+t+'" class="playlist-view grid-view">'+e+"</ul>"}(e,Vi(i,o,_i))}(t):'<p class="playlist-message">This playlist is empty</p>'}function qi(t){if(P()!==t)return;const e=q();e&&-1!==e.index&&(Wi(e.index,t),Yi(t))}function Di(t){var e;ji(t.id).innerHTML=Ui(t),t.tracks.length?(qi(t.id),e=t.id,xi[e]&&Si(e),Ai(e)):Si(t.id)}function Ni(t,e){const{sortOrder:n}=M(e),i=n.indexOf(t);return document.getElementById("js-"+e).children[i]}function Wi(t,e){(Oi=Ni(t,e)).classList.add("playing")}function zi(){Oi&&(Oi.classList.remove("playing"),Oi=null)}function Yi(t){requestAnimationFrame(()=>{const e=ji(t),{offsetHeight:n,offsetTop:i}=Oi,{clientHeight:o,scrollTop:s}=e;(i-n<s||i>s+o)&&(e.scrollTop=i-o/2)})}function Ki(t){const e=Ci();e&&Ge(e,t)}function Xi(t){const e=document.getElementById("js-list-toggle-btn"),n=document.getElementById("js-grid-toggle-btn");"list"===t?(e.classList.add("active"),n.classList.remove("active")):(n.classList.add("active"),e.classList.remove("active"))}function Fi(t,e){t.type=e,to({action:"change-type",playlist:{_id:t._id,type:e}}),Di(t),Xi(e)}function Ji(t){var e,n,i;C(t.id,{initialized:!0}),e=t.title,n=t.id,document.getElementById("js-sidebar-entries").insertAdjacentHTML("beforeend",'\n        <li id="js-sidebar-entry-'+n+'" class="sidebar-entry">\n            <a href="./#/playlist/'+n+'" class="sidebar-link" data-link>'+e+"</a>\n        </li>\n    "),function(t){const e=Ct(),n=R(t.tracks),i=p({iconId:"link"}),o=t.url?'<a href="'+t.url+'"\n            class="btn btn-icon pl-entry-btn" target="_blank"\n            title="Open playlist on YouTube">\n            '+i+"\n        </a>\n    ":"",s=t.url?Rt({action:"sync",title:"Synchronize playlist",iconId:"sync"}):"",r=t.url?'\n        <div class="pl-entry-panel-container">\n            '+Rt({action:"settings",title:"Settings",iconId:"settings"})+"\n        </div>\n    ":"",a=Rt({action:"remove",title:"Remove playlist",iconId:"trash"}),l=p({iconId:"edit",className:"pl-entry-input-icon"}),c=t.storePlaylist?"":p({iconId:"alert",className:"pl-entry-stats-item",title:"This playlist will not be stored"}),d=t.isPrivate?p({iconId:"lock",className:"pl-entry-stats-item",title:t.user?"Private to "+t.user.name:"Private"}):"";e.insertAdjacentHTML("beforeend",'\n        <li class="pl-entry" data-entry-id='+t.id+">\n            "+Pt(t.tracks)+'\n            <div class="pl-entry-content">\n                <div class="pl-entry-input-container" data-action="edit">\n                    <input type="text" class="input pl-entry-input" value="'+t.title+'">\n                    '+l+'\n                </div>\n                <div class="pl-entry-footer">\n                    <div class="pl-entry-stats">\n                        '+c+"\n                        "+d+'\n                        <span class="pl-entry-stats-item track-count">'+t.tracks.length+' tracks</span>\n                        <span class="pl-entry-stats-item playlist-duration">'+Ht(n)+"</span>\n                    </div>\n                    "+o+"\n                    "+s+"\n                    "+r+"\n                    "+a+"\n                </div>\n            </div>\n        </li>\n    ")}(t),K(t),F(t),k(i="playlist/"+t.id)||w.push(i)}function Zi(t){let{id:e,_id:n}=t;_(e)&&vi(q()),function(t){const e=ji(t);e&&(Si(t),o(e))}(e),function(t){delete L[t],delete I[t]}(e),function(t){o(tt(t))}(e),function(t){w=w.filter(e=>!e.includes(t))}(e),to({action:"remove",playlist:{_id:n}})}function $i(t,e){const{initialized:n,rendered:i}=M(t.id);var o;e.length&&(t.tracks=t.tracks.concat(e)),n?(K(t),_(t.id)&&z(t.id,g("shuffle")),F(t),D(t.id),Ut(t.id,t.tracks),i&&Di(t),to({action:"add-tracks",playlist:{_id:t._id,tracks:e}})):(Ji(t),o="local-files",window.location.hash.includes(o)&&!i&&E(),t.storePlaylist&&to({action:"add",playlist:t}))}function Gi(t){const e=S({title:t.target.title.value,id:Math.random().toString(36).slice(2),storePlaylist:!0,type:"grid"});Ji(e),to({action:"add",playlist:e}),t.preventDefault(),t.target.reset()}const Qi=new Worker("./ww.js");function to(t){("add"===t.action||t.playlist._id)&&Qi.postMessage(t)}Qi.onmessage=function(t){let{data:{action:e,payload:n}}=t;"init"===e?(n.forEach(t=>{Ji(S(t))}),Nt(n.filter(t=>t.syncOnInit)),ii.initTrack(),E()):"update"===e&&O(n.id,n)},Qi.onerror=function(t){console.log(t)};n(81);var eo=n(31);async function no(t,e){void 0===e&&(e=[]);const n=t[e.length],i=await(o=n.audioTrack.link,fetch(o).then(t=>t.blob()));var o;const{duration:s}=await Object(eo.a)(i);return e.push({audioTrack:i,durationInSeconds:s,title:n.name,artist:"",album:"",name:n.name,duration:c(s),picture:"assets/images/album-art-placeholder.png",player:"native"}),e.length===t.length?e:no(t,e)}document.getElementById("js-dropbox-option").addEventListener("mouseenter",(function t(e){let{currentTarget:n}=e;i.load({src:"https://www.dropbox.com/static/api/2/dropins.js",id:"dropboxjs","data-app-key":"6ur73hspbv8o1z9"}),n.removeEventListener("mouseenter",t)}));const io=document.getElementById("js-import-options"),oo=function(){const t=Object.assign({},{"local-files":{storePlaylist:!1},dropbox:{storePlaylist:!1}},{},JSON.parse(localStorage.getItem("import-settings")));return{setSetting:function(e,n,i){t[e][n]=i,localStorage.setItem("import-settings",JSON.stringify(t))},getSetting:function(e,n){return t[e]?t[e][n]:null},getSettings:function(){return t}}}();function so(t,e){const n=tt(t),i=function(t){const e=document.querySelector('[data-entry-id="'+t+'"]');return e?e.querySelector("[data-action='sync']"):null}(t);n&&n.classList.toggle("show-spinner",e),i&&(i.disabled=e)}function ro(t){document.getElementById("js-import-form").removeEventListener("submit",fo),t.removeEventListener("click",ao),t.remove()}function ao(t){let{target:e,currentTarget:n}=t;if(e===n||r("data-cancel-btn",e,n))return void ro(n);const i=r("data-id",e,n);if(i)return Ot("https://youtube.com/playlist?list="+i.attrValue),void ro(n);const o=r("data-info-btn",e,n);if(o){const{elementRef:t}=o;G("js-youtube-info-panel",po,{element:t})}}function lo(){const t=function(){const t=ht;if(!t)return"";return'\n        <h4 class="youtube-modal-section-title">Your Playlists</h4>\n        <ul class="youtube-modal-playlists">'+t.reduce((t,e)=>"\n            "+t+'\n            <li class="youtube-modal-playlist">\n                <div class="youtube-modal-playlist-thumb-container">\n                    <img src="'+e.thumbnail+'" alt="" class="youtube-modal-playlist-thumb">\n                </div>\n                <div class="youtube-modal-playlist-content">\n                    <div>'+e.title+'</div>\n                    <div class="youtube-modal-playlist-info">'+e.itemCount+" item"+(1===e.itemCount?"":"s")+'</div>\n                </div>\n                <button class="btn btn-text youtube-modal-playlist-import-btn" data-id="'+e.id+'">Import</button>\n            </li>\n        ',"")+"</ul>\n    "}();io.insertAdjacentHTML("beforeend",'\n        <div id="js-youtube-modal" class="youtube-modal-container">\n            <div class="youtube-modal">\n                <h3 class="youtube-modal-title">YouTube Import</h3>\n                <form id="js-import-form" class="youtube-modal-form">\n                    <div class="youtube-modal-form-input-container">\n                        <input type="text" name="url" class="input youtube-modal-form-input" placeholder="URL" required>\n                        <button type="button"\n                            class="btn btn-icon youtube-modal-form-info-btn" data-info-btn>\n                            <svg viewBox="0 0 24 24">\n                                <use href="#info"></use>\n                            </svg>\n                        </button>\n                    </div>\n                    <button class="btn youtube-modal-form-submit-btn">Import</button>\n                </form>\n                '+t+'\n                <div class="youtube-modal-footer">\n                    <button class="btn btn-text" data-cancel-btn>Cancel</button>\n                </div>\n            </div>\n        </div>\n    '),document.getElementById("js-youtube-modal").addEventListener("click",ao),document.getElementById("js-import-form").addEventListener("submit",fo)}function co(t,e,n){!function(t){void 0===t&&(t=""),document.getElementById("js-import-progress-label").textContent=t}(t),document.getElementById("js-import-progress-bar-inner").style.transform="scaleX("+e/n+")",document.getElementById("js-import-progress-bar-label").textContent=e+"/"+n}function uo(t){let{target:e}=t;Eo([...e.files]),e.value="",e.removeEventListener("change",uo),e.remove()}function mo(t){const e=document.getElementById("js-file-picker")||function(){const t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("id","js-file-picker"),t.setAttribute("accept","audio/*"),t.classList.add("file-picker"),t.addEventListener("change",uo),document.body.appendChild(t),t}();"file"===t?(e.removeAttribute("webkitdirectory"),e.removeAttribute("directory"),e.removeAttribute("allowdirs"),e.setAttribute("multiple","")):"folder"===t&&(e.removeAttribute("multiple"),e.setAttribute("webkitdirectory",""),e.setAttribute("directory",""),e.setAttribute("allowdirs","")),e.click()}function fo(t){const e=t.target.elements.url.value.trim();e&&Ot(e),t.preventDefault()}function po(t,e){let{element:n}=e;n.insertAdjacentHTML("afterend",'\n        <div id="'+t+'" class="panel info-panel">\n            <h3 class="panel-title">Accepted formats:</h3>\n            <ul>\n                <li class="info-panel-content-item">youtube.com/playlist?list={playlistId}</li>\n                <li class="info-panel-content-item">youtube.com/watch?v={videoId}</li>\n            </ul>\n        </div>\n    ')}function yo(t,e){let{element:n}=e;const i=oo.getSettings();n.insertAdjacentHTML("afterend",'\n        <div id="'+t+'" class="panel import-settings-panel">\n            <h3 class="panel-title">Settings</h3>\n            <label class="import-setting">\n                <input type="checkbox" class="checkbox-input"\n                    '+(i["local-files"].storePlaylist?"checked":"")+' data-id="local-files">\n                <div class="checkbox">\n                    <div class="checkbox-tick"></div>\n                </div>\n                <span class="import-setting-label">Store <b>Local files</b> playlist</span>\n            </label>\n            <label class="import-setting">\n                <input type="checkbox" class="checkbox-input"\n                    '+(i.dropbox.storePlaylist?"checked":"")+' data-id="dropbox">\n                <div class="checkbox">\n                    <div class="checkbox-tick"></div>\n                </div>\n                <span class="import-setting-label">Store <b>Dropbox</b> playlist</span>\n            </label>\n            <div class="import-setting-message">\n                <svg viewBox="0 0 24 24">\n                    <use href="#info"></use>\n                </svg>\n                <span>Stored playlists will persist through reload</span>\n            </div>\n        </div>\n    '),document.getElementById(t).addEventListener("change",vo)}function vo(t){let{target:e}=t;const n=e.getAttribute("data-id");oo.setSetting(n,"storePlaylist",e.checked)}async function go(t){let{attrValue:e,elementRef:n}=t;"modal-toggle"===e?(n.disabled=!0,await async function(){var t;if(await dt()&&!ht)try{const e=await Et("playlists","snippet,contentDetails","mine",!0);t=e.items,ht=t.map(t=>({id:t.id,itemCount:t.contentDetails.itemCount,title:t.snippet.title,thumbnail:t.snippet.thumbnails.medium.url}))}catch(t){console.log(t)}}(),lo(),n.disabled=!1):"google-sign-in"===e&&(d("import",{importing:!0,option:"youtube"}),await ct(n),d("import",{importing:!1,option:"youtube"}))}io.addEventListener("click",t=>{let{currenTarget:e,target:n}=t;const i=r("data-item",n,e);if(!i||i.elementRef.disabled)return;const{attrValue:o}=r("data-option",n,e);"local"===o?mo(i.attrValue):"dropbox"===o?Dropbox.choose({success(t){const e="dropbox";wo(e,A(e)||S({id:e,title:"Dropbox",type:"grid",storePlaylist:oo.getSetting(e,"storePlaylist")}),t,no)},linkType:"direct",multiselect:!0,extensions:["audio"]}):"youtube"===o&&go(i)}),document.getElementById("js-import-settings-btn").addEventListener("click",t=>{let{currentTarget:e}=t;G("js-import-settings-panel",yo,{element:e})}),window.addEventListener("import",t=>{let{detail:e}=t;const{importing:n,option:i,playlistId:o}=e;!function(t,e){let{children:n}=t;Array.from(n).forEach(t=>{t.hasAttribute("data-item")&&(t.disabled=e)})}(document.querySelector("[data-option="+i+"]"),n),so(o,n),"local"===i&&(n?io.insertAdjacentHTML("afterend",'\n        <div id="js-import-progress" class="import-progress">\n            <p id="js-import-progress-label" class="import-progress-label"></p>\n            <div class="import-progress-bar">\n                <div id="js-import-progress-bar-inner" class="import-progress-bar-inner"></div>\n                <div id="js-import-progress-bar-label" class="import-progress-bar-label"></div>\n            </div>\n        </div>\n    '):document.getElementById("js-import-progress").remove())});const bo="assets/images/album-art-placeholder.png";async function ho(t,e){void 0===e&&(e=[]);const n=e.length,{audioTrack:i,name:o}=t[n];co("Processing: "+o,n+1,t.length);try{const{artist:s,title:r,album:a,duration:l,picture:d}=await Object(eo.a)(i);e.push({eligibleForMoreInfo:Boolean(s&&r),audioTrack:i,name:o,title:s?r:o,artist:s||"",album:a||"",picture:d||bo,durationInSeconds:l,duration:c(l),player:"native"})}catch(e){console.log(e),t.splice(n,1)}finally{return n+1===t.length?e:ho(t,e)}}async function wo(t,e,n,i){if(!n.length)return void vt({title:t+" files",body:"No valid audio file found"});const o=(s=n,r=e.tracks,s.reduce((t,e)=>{const n=function(t){return t.slice(0,t.lastIndexOf("."))}(e.name.trim());return r.some(t=>t.name===n)||t.push({audioTrack:e,name:n}),t},[]));var s,r;if(o.length){d("import",{importing:!0,option:t,playlistId:e.id});try{$i(e,await i(o)),requestIdleCallback&&requestIdleCallback(ko)}catch(t){console.log(t)}finally{d("import",{importing:!1,option:t,playlistId:e.id})}}else vt({title:t+" files",body:"Track"+(n.length>1?"s":"")+" already exist"})}async function ko(){const t=A("local-files");if(!t)return;const e=t.tracks.find(t=>t.eligibleForMoreInfo),{_id:n,id:i,tracks:o,type:s}=t;if(!e)return Ut(i,o),void to({action:"update-tracks",playlist:{_id:n,tracks:o}});try{const{album:t,picture:n}=await async function(t){let{artist:e,title:n,album:i,picture:o}=t;const s=o===bo;if(i&&!s)return{album:i,picture:o};try{const t="https://ws.audioscrobbler.com/2.0/",r="?method=track.getInfo&api_key="+"3e8d48b3277c21bc77965345f5faf18c"+"&artist="+e+"&track="+n+"&format=json",a=await fetch(t+r).then(t=>t.json());if(a.track&&a.track.album){const{title:t,image:e}=a.track.album;if(!i&&t&&(i=t),s&&e){const t=e[e.length-1]["#text"];if(t){const{origin:e,pathname:n}=new URL(t),[i]=n.split("/").slice(-1);o=e+"/i/u/"+i}}}}catch(t){console.log(t)}return{album:i,picture:o}}(e);if(e.album=t,e.picture=n,i===Li()){const t=Ni(e.index,i),n=q();t&&(t.innerHTML=Hi(e,i,s)),n&&n.name===e.name&&Vn(e)}}catch(t){console.log(t)}finally{delete e.eligibleForMoreInfo,requestIdleCallback(ko)}}function Eo(t){const e=function(t){const e=new Audio,n=[];return t=t.reduce((t,i)=>{if(e.canPlayType(i.type))t.push(i);else if(i.type.startsWith("audio")){const{name:t}=i;n.push(t.slice(t.lastIndexOf(".")))}return t},[]),n.length&&vt({title:"Local files",body:"Can't play audio files with type: "+n.join(", ")}),t}(t),n="local-files";wo("local",A(n)||S({id:n,title:"Local files",type:"list",storePlaylist:oo.getSetting(n,"storePlaylist")}),e,ho)}window.addEventListener("drop",t=>{const{files:e}=t.dataTransfer;t.preventDefault(),t.dataTransfer.dropEffect="copy",e.length&&Eo([...e])}),window.addEventListener("dragover",t=>{t.preventDefault()}),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e.onstatechange=()=>{"installed"===e.state&&navigator.serviceWorker.controller&&d("sw-state-change","update")}}}).catch(console.log)},85:function(t,e,n){},86:function(t,e,n){}});